/*! For license information please see wijmo.chart.map.min.js.LICENSE.txt */
var wijmo,__extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){!function(t){!function(t){"use strict";var e=function(){function t(){}return Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"geoPoint",{get:function(){return this._map?this._map.convertBack(this.point):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{get:function(){return this._map},enumerable:!0,configurable:!0}),t}();t.MapHitTestInfo=e}(t.map||(t.map={}))}(t.chart||(t.chart={}))}(wijmo||(wijmo={})),function(t){var e;!function(e){"use strict";e._DrawOptions=function(){};var i=function(e){function i(t){var i=e.call(this,t)||this;return i.scale=1,i.element.setAttribute("xmlns:wj-map","http://www.grapecity.com/wijmo"),i}return __extends(i,e),i.prototype.drawPolygon2=function(e,i){var n=e?e.className:null,r=e?e.clipPath:null,o=e?e.style:null,s=this.precision;if(i&&i.length>0){var a=document.createElementNS("http://www.w3.org/2000/svg","path");this._applyColor(a,"stroke",this.stroke);var h=this.strokeWidth;null!==h&&(t.isIE()&&(h*=this.scale),this._setAttribute(a,"stroke-width",h.toString())),this._applyColor(a,"fill",this.fill);for(var c="",l=0;l<i.length;l++){var u=i[l],p=u.length/2;if(p>1){c+=" M "+u[0].toFixed(s)+" "+u[1].toFixed(s);for(var f=1;f<p;f++)c+=" L "+u[2*f].toFixed(s)+" "+u[2*f+1].toFixed(s);c+=" Z"}}return this._setAttribute(a,"d",c),n&&a.setAttribute("class",n),r&&this._setClipPath(a,r),this._applyStyle(a,o),this._appendChild(a),a.setAttribute("vector-effect","non-scaling-stroke"),a}return null},i}(t.chart.SvgRenderEngine);e._SvgMapRenderEngine=i}((e=t.chart||(t.chart={})).map||(e.map={}))}(wijmo||(wijmo={})),function(t){var e;!function(e){"use strict";var i=function(){function t(t,e){this.min=t,this.max=e}return Object.defineProperty(t.prototype,"range",{get:function(){return this.max-this.min},enumerable:!0,configurable:!0}),t.prototype.norm=function(t){return(t-this.min)/this.range},t}();e._Range=i;var n=function(){function e(){}return e.getRange=function(e,n){if(e&&n){for(var r=e.length,o=NaN,s=NaN,a=0;a<r;a++){var h=e[a];if(h){var c=void 0;c=t.isFunction(n)?n(h):n.getValue(h),t.isString(c)&&(c=parseFloat(c)),isFinite(c)&&((isNaN(o)||c<o)&&(o=c),(isNaN(s)||c>s)&&(s=c))}}if(!isNaN(o)&&!isNaN(s))return new i(o,s)}return null},e}();e._Utils=n}((e=t.chart||(t.chart={})).map||(e.map={}))}(wijmo||(wijmo={})),function(t){var e;!function(e){"use strict";var i=function(){function i(e){this._clrs=[],this._clrUnknown="transparent",this.colors=t.chart.Palettes.SequentialSingle.Greys,this.initialize(e)}return i.prototype.initialize=function(e){t.copy(this,e)},i.prototype.convert=function(t,e){return void 0===e&&(e=!0),isFinite(t)&&0!=this._clrs.length?(this._range&&e&&(t=this._range.norm(t)),this.scale&&(t=this.scale(t)),2==this._clrs.length?this._interpolate(this._clrs[0],this._clrs[1],t):this._clrSpline.interpolate(t).toString()):this.colorUnknown},Object.defineProperty(i.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale!=t&&(this._scale=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"binding",{get:function(){return this._binding},set:function(t){this._binding!=t&&(this._binding=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorUnknown",{get:function(){return this._clrUnknown},set:function(e){this._clrUnknown!=e&&(this._clrUnknown=t.asString(e))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colors",{get:function(){return this._colors},set:function(e){if(this._colors!=e){this._clrs=[];var i=this._colors=e;if(i){for(var n=0;n<i.length;n++)this._clrs.push(new t.Color(i[n]));this._clrSpline=new r(this._clrs)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"format",{get:function(){return this._fmt},set:function(e){this._fmt!=e&&(this._fmt=t.asString(e,!0))},enumerable:!0,configurable:!0}),i.prototype.domain=function(i){t.isFunction(this.binding)?this._range=e._Utils.getRange(i,this.binding):this._range=e._Utils.getRange(i,new t.Binding(this.binding))},i.prototype.getValue=function(e){return t.isFunction(this.binding)?this.binding(e):new t.Binding(this.binding).getValue(e)},i.prototype._interpolate=function(e,i,n){var r=1-(n=t.clamp(n,0,1));return t.Color.fromRgba(e.r*r+i.r*n,e.g*r+i.g*n,e.b*r+i.b*n,e.a*r+i.a*n).toString()},i.prototype._drawLegend=function(t,e,i){n.draw(t,this,e,i)},i.prototype._measureLegend=function(t,e,i,r){return n.measure(t,this,e,i,r)},i}();e.ColorScale=i;var n=function(){function e(){}return e.measure=function(e,i,n,r,o){var s=n?new t.Size(this.itemSize,o-120):new t.Size(r-80,this.itemSize),a=this._getValues(i),h=a.length;if(a.length){for(var c=new t.Size,l=0;l<h;l++){var u=this._getLabel(i,a[l]),p=e.measureString(u);c.width=Math.max(c.width,p.width),c.height=Math.max(c.height,p.height)}c.width&&c.height&&(n?s.width+=c.width+this.marginText:s.height+=c.height+this.marginText)}return s},e.draw=function(e,i,n,r){e.stroke="transparent";var o=this._getValues(i);if(r){for(var s=(n=n.inflate(0,-10)).height/100,a=0;a<100;a++)e.fill=i.convert((a+.5)/100,!1),e.drawRect(n.left,n.top+a*s,this.itemSize,s+1);if(o.length)for(e.stroke="black",a=0;a<o.length;a++){var h=o[a],c=i._range.norm(h),l=n.top+c*n.height,u=this._getLabel(i,h),p=e.measureString(u);e.drawString(u,new t.Point(n.left+this.itemSize+this.marginText,l+.5*p.height)),e.drawLine(n.left,l,n.left+this.itemSize,l)}}else{var f=(n=n.inflate(-20,0)).width/100;if(s=0,o.length)for(a=0;a<o.length;a++){h=o[a],c=i._range.norm(h),i.scale&&(c=i.scale(c));var m=n.left+c*n.width;u=this._getLabel(i,h),p=e.measureString(u),s=Math.max(s,p.height),e.drawString(this._getLabel(i,h),new t.Point(m-.5*p.width,n.top+p.height))}for(s&&(s+=this.marginText),a=0;a<100;a++)e.fill=i.convert((a+.5)/100,!1),e.drawRect(n.left+a*f,n.top+s,f+1,this.itemSize);if(o.length)for(e.stroke="black",a=0;a<o.length;a++)h=o[a],c=i._range.norm(h),i.scale&&(c=i.scale(c)),m=n.left+c*n.width,e.drawLine(m,n.bottom-this.itemSize,m,n.bottom)}},e._getValues=function(t){var e=[],i=t._range;if(i)for(var n=this._calcDelta(i.range),r=Math.round(i.min/n)*n;r<=i.max;r+=n)r<i.min||e.push(r);return e},e._getLabel=function(e,i){return e.format?t.Globalize.formatNumber(i,e.format):i.toString()},e._calcDelta=function(t){var e=this._nicePrecision(t),i=t/10,n=this._niceNumber(2*i,-e,!0);return n<i&&(n=this._niceNumber(i,1-e,!1)),n<i&&(n=this._niceTickNumber(i)),n},e._nicePrecision=function(e){if(!t.isNumber(e)||e<=0)return 0;var i,n=Math.log(e)/Math.LN10;i=n>=0?Math.floor(n):Math.ceil(n);var r=e/Math.pow(10,i);return r<3&&(i=1-i,(r=e/Math.pow(10,i))<3&&(i+=1)),i},e._niceTickNumber=function(t){if(0==t)return t;t<0&&(t=-t);var e=Math.log(t)/Math.LN10,i=Math.floor(e),n=t/Math.pow(10,i),r=10;return n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,i)},e._niceNumber=function(t,e,i){if(0==t)return t;t<0&&(t=-t);var n=t/Math.pow(10,e),r=10;return i?n<1.5?r=1:n<3?r=2:n<4.5?r=4:n<7&&(r=5):n<=1?r=1:n<=2?r=2:n<=5&&(r=5),r*Math.pow(10,e)},e.itemSize=20,e.marginText=4,e}(),r=function(){function e(t){this._clrs=t;for(var e=t.length,i=[],n=[],r=[],s=[],a=0;a<e;a++){var h=t[a],c=a/(e-1);i.push(c),n.push(h.r),r.push(h.g),s.push(h.b)}this._rsp=new o(i,n),this._gsp=new o(i,r),this._bsp=new o(i,s)}return e.prototype.interpolate=function(e){e=t.clamp(e,0,1);var i=this._rsp.calculate(e),n=this._gsp.calculate(e),r=this._bsp.calculate(e);return t.Color.fromRgba(i,n,r)},e}(),o=function(){function e(e,i,n){this.k=.002,this._a=[],this._b=[],this._c=[],this._d=[],this.m=[[-.5,1.5,-1.5,.5],[1,-2.5,2,-.5],[-.5,0,.5,0],[0,1,0,0]],this._x=e,this._y=i;var r=this._len=n||Math.min(e.length,i.length);if(r>3)for(var o=0;o<r-1;o++){var s=0==o?new t.Point(e[o],i[o]):new t.Point(e[o-1],i[o-1]),a=new t.Point(e[o],i[o]),h=new t.Point(e[o+1],i[o+1]),c=o==r-2?new t.Point(e[o+1],i[o+1]):new t.Point(e[o+2],i[o+2]),l=new t.Point,u=new t.Point,p=new t.Point,f=new t.Point;l.x=s.x*this.m[0][0]+a.x*this.m[0][1]+h.x*this.m[0][2]+c.x*this.m[0][3],u.x=s.x*this.m[1][0]+a.x*this.m[1][1]+h.x*this.m[1][2]+c.x*this.m[1][3],p.x=s.x*this.m[2][0]+a.x*this.m[2][1]+h.x*this.m[2][2]+c.x*this.m[2][3],f.x=s.x*this.m[3][0]+a.x*this.m[3][1]+h.x*this.m[3][2]+c.x*this.m[3][3],l.y=s.y*this.m[0][0]+a.y*this.m[0][1]+h.y*this.m[0][2]+c.y*this.m[0][3],u.y=s.y*this.m[1][0]+a.y*this.m[1][1]+h.y*this.m[1][2]+c.y*this.m[1][3],p.y=s.y*this.m[2][0]+a.y*this.m[2][1]+h.y*this.m[2][2]+c.y*this.m[2][3],f.y=s.y*this.m[3][0]+a.y*this.m[3][1]+h.y*this.m[3][2]+c.y*this.m[3][3],this._a.push(l),this._b.push(u),this._c.push(p),this._d.push(f)}}return e.prototype.calculate=function(t){t*=this._len-1;var e=Math.floor(t);e<0&&(e=0),e>this._len-2&&(e=this._len-2);var i=t-e;return this._a[e].x,this._b[e].x,this._c[e].x,this._d[e].x,((this._a[e].y*i+this._b[e].y)*i+this._c[e].y)*i+this._d[e].y},e}()}((e=t.chart||(t.chart={})).map||(e.map={}))}(wijmo||(wijmo={})),function(t){var e;!function(e){"use strict";var i=function(i){function r(r,o){var s=i.call(this,r,null,!0)||this;s._layers=new t.collections.ObservableArray,s._center=new t.Point,s._zoom=1,s._zoomStep=.5,s._offset=new t.Point,s._proj=new n,s._touchStartH=s._touchStart.bind(s),s._touchMoveH=s._touchMove.bind(s),s._touchEndH=s._touchEnd.bind(s),s._touchCancelH=s._touchCancel.bind(s),s._mouseWheelH=s._mouseWheel.bind(s),s._handleTouch=!1;var a=s.hostElement;s.applyTemplate("wj-control wj-flexchart wj-flexmap",null,null),s._currentRenderEngine=new e._SvgMapRenderEngine(a);var h=t.createElement("<div></div>",null,{position:"relative"});s._overlay=t.createElement("<div></div>",h,{position:"absolute",left:"90%",bottom:"90%"}),t.createElement('<button class="wj-btn"><span class="wj-glyph-plus"></span></button>',s._overlay).addEventListener("click",(function(){return s.zoom+=s._zoomStep})),t.createElement('<button class="wj-btn"><span class="wj-glyph-minus"></span></button>',s._overlay).addEventListener("click",(function(){return s.zoom-=s._zoomStep})),t.addClass(a,"wj-flexchart-touch-disabled"),a.appendChild(h),s._legend=new t.chart.Legend(s),s._legend.position=t.chart.Position.None,s._tooltip=new t.chart.ChartTooltip,s.tooltip.content=null;var c=s;return s.layers.collectionChanged.addHandler((function(){s.layers.forEach((function(t){return t.map=c})),s.invalidate()})),s.addEventListener(a,"click",(function(t){if(!c.isDisabled){var e=c._tooltip;e.content&&c.isTouching&&c._updateTooltip(e,t)}})),s.addEventListener(a,"mousedown",(function(e){c.isDisabled||0!=e.button||(s.focus(),s._dragStart=new t.Point(e.pageX,e.pageY),s._hideToolTip())})),s.addEventListener(a,"mousemove",(function(e){if(!c.isDisabled)if(c._dragStart){var i=s.convertBack(s._toControl(c._dragStart)),n=s.convertBack(s._toControl(e));s.center=new t.Point(s.center.x-n.x+i.x,s.center.y-n.y+i.y),s._dragStart=new t.Point(e.pageX,e.pageY)}else{var r=c._tooltip;r.content&&!c.isTouching&&c._updateTooltip(r,e)}})),s.addEventListener(a,"mouseup",(function(t){s._dragStart=null})),s.addEventListener(a,"mouseleave",(function(t){t.target==c.hostElement&&(s._dragStart=null,c._hideToolTip())})),s.addEventListener(a,"touchstart",s._touchStartH),s.addEventListener(a,"touchmove",s._touchMoveH),s.addEventListener(a,"touchcancel",s._touchCancelH),s.addEventListener(a,"touchend",s._touchEndH),s.addEventListener(a,"wheel",s._mouseWheelH),s.initialize(o),s.refresh(),s}return __extends(r,i),Object.defineProperty(r.prototype,"layers",{get:function(){return this._layers},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"center",{get:function(){return this._center},set:function(t){this._center!=t&&(this._center=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"zoom",{get:function(){return this._zoom},set:function(t){t<1&&(t=1),this._zoom!=t&&(this._zoom=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),r.prototype.convert=function(t){return this._convertMercator(t)},r.prototype.convertBack=function(t){return this._convertMercatorBack(t)},r.prototype.hitTest=function(i,n){var r=this._toControl(i,n),o=new e.MapHitTestInfo;if(t.chart.FlexChartBase._contains(this._rectHeader,r))o._chartElement=t.chart.ChartElement.Header;else if(t.chart.FlexChartBase._contains(this._rectFooter,r))o._chartElement=t.chart.ChartElement.Footer;else if(t.chart.FlexChartBase._contains(this._rectLegend,r))o._chartElement=t.chart.ChartElement.Legend;else if(t.chart.FlexChartBase._contains(this._rectChart,r)){var s=void 0;if(i instanceof MouseEvent)s=document.elementFromPoint(i.x,i.y);else{var a=this._getHostOffset();s=document.elementFromPoint(a.x+r.x,a.y+r.y)}var h=s.getAttribute("wj-map:id");null!=h&&(o._item=this._getItemById(h))}return o},r.prototype.zoomTo=function(e){var i=this._proj.maxY,n=Math.max(e.top,-i),r=Math.min(e.bottom,i),o=this.convert(new t.Point(e.left,n)),s=this.convert(new t.Point(e.right,r)),a=new t.Point(.5*(o.x+s.x),.5*(o.y+s.y));this.center=this.convertBack(a),o=this.convert(new t.Point(e.left,n)),s=this.convert(new t.Point(e.right,r));var h=this._mapRect.width/Math.abs(s.x-o.x),c=this._mapRect.height/Math.abs(s.y-o.y);this.zoom*=this.zoom+Math.log(Math.min(h,c))*Math.LOG2E},r.prototype.invalidate=function(t){t&&this.layers.forEach((function(t){t._clearCache&&t._clearCache()})),i.prototype.invalidate.call(this,t)},r.prototype._renderChart=function(e,i,n){this.onRendering(new t.chart.RenderEventArgs(e));var r=i.width,o=i.height,s=this._parseMargin(this.plotMargin);isNaN(s.left)&&(s.left=8),isNaN(s.right)&&(s.right=8),isNaN(s.top)&&(s.top=8),isNaN(s.bottom)&&(s.bottom=8),i.top+=s.top,o=i.height-(s.top+s.bottom),i.height=o>0?o:24,i.left+=s.left,r=i.width-(s.left+s.right),i.width=r>0?r:24;var a="mapRect"+(1e6*Math.random()).toFixed();e.addClipRect(i,a);var h=e.startGroup(null,a,!0);this._mapRect=i.clone();var c=this._size=.5*Math.min(i.width,i.height);this._offset.x=this._mapRect.left,this._offset.y=this._mapRect.top,i.width>2*c?this._offset.x=.5*i.width-c+this._mapRect.left:i.height>2*this._size&&(this._offset.y=.5*i.height-c+this._mapRect.top);var l=Math.pow(2,this.zoom),u=this._proj.convert(this.center);u.x=u.x*l*c-c,u.y=u.y*l*c-c,this._offset.x-=u.x,this._offset.y-=u.y,e.precision=6;for(var p=0;p<this.layers.length;p++){var f=1/(l*c);e.scale=f;var m=e.element.createSVGTransform(),_=e.element.createSVGMatrix();_.a=_.d=l*c,_.b=_.c=0,_.e=this._offset.x,_.f=this._offset.y,m.setMatrix(_),this.layers[p].render(e,m,h)}e.endGroup();var d=this._rectChart.bottom-this._mapRect.bottom;this._overlay.style.left=(this._mapRect.right-80).toString()+"px",this._overlay.style.bottom=d.toString()+"px",this.onRendered(new t.chart.RenderEventArgs(e))},r.prototype._getDesiredLegendSize=function(e,i,n,r){for(var o=new t.Size,s=0;s<this.layers.length;s++){var a=this.layers[s];if(a.colorScale){a.getAllFeatures?a.colorScale.domain(a.getAllFeatures()):a.colorScale.domain(a.itemsSource);var h=a.colorScale._measureLegend(e,i,n,r);h&&h.width&&h.height&&(o=h)}}return o},r.prototype._renderLegend=function(e,i,n,r,o,s){var a=new t.Rect(i.x,i.y,o,s);this.layers.forEach((function(t){t.colorScale&&t.colorScale._drawLegend(e,a,r)}))},r.prototype._copy=function(e,i){if("layers"==e){this.layers.clear();for(var n=t.asArray(i),r=0;r<n.length;r++)this.layers.push(n[r]);return!0}return!1},r.prototype._updateTooltip=function(e,i){var n=e.content;if(n){var r=document.elementFromPoint(i.x,i.y),o=r?r.getAttribute("wj-map:id"):null;if(null!=o){var s=this._getItemById(o);s&&(t.isFunction(n)&&(n=n(s)),n=t.format(n,s))}else n=null}n&&n.trim().length>0?this._showToolTip(n,new t.Rect(i.clientX,i.clientY,5,5)):this._hideToolTip()},r.prototype._getItemById=function(t){for(var e=0;e<this.layers.length;e++){var i=this.layers[e];if(i._getFeatureById){if(n=i._getFeatureById(t))return n.properties}else if(i.getItemById){var n;if(n=i.getItemById(t))return n}}return null},r.prototype._convertMercator=function(t){var e=Math.pow(2,this.zoom)*this._size,i=this._proj.convert(t);return i.x*=e,i.y*=e,i.x+=this._offset.x,i.y+=this._offset.y,i},r.prototype._convertMercatorBack=function(t){var e=Math.pow(2,this.zoom)*this._size,i=this._proj,n=t.clone();return n.x-=this._offset.x,n.y-=this._offset.y,n.x/=e,n.y/=e,i.convertBack(n)},r.prototype._touchStart=function(e){if(!this.isDisabled){switch(e.touches.length){case 1:this._handleTouch=!0,this._dragStart=new t.Point(e.touches[0].pageX,e.touches[0].pageY);break;case 2:this._dragStart=null,this._handleTouch=!0,this._touch1=new t.Point(e.touches[0].pageX,e.touches[0].pageY),this._touch2=new t.Point(e.touches[1].pageX,e.touches[1].pageY)}this._handleTouch&&this._hideToolTip()}},r.prototype._touchMove=function(e){if(!this.isDisabled)if(this._handleTouch&&e.preventDefault(),this._dragStart){var i=this.convertBack(this._toControl(this._dragStart)),n=this.convertBack(this._toControl(e.touches[0].pageX,e.touches[0].pageY));this.center=new t.Point(this.center.x-n.x+i.x,this.center.y-n.y+i.y),this._dragStart=new t.Point(e.touches[0].pageX,e.touches[0].pageY)}else if(this._touch1&&this._touch2){var r=new t.Point(e.touches[0].pageX,e.touches[0].pageY),o=new t.Point(e.touches[1].pageX,e.touches[1].pageY),s=this._dist(this._touch1,this._touch2),a=this._dist(r,o);Math.abs(a-s)>1&&(this.zoom+=Math.log2(a/s),this._touch1=r,this._touch2=o)}},r.prototype._dist=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},r.prototype._touchEnd=function(t){this._handleTouch=!1,this._dragStart=this._touch1=this._touch2=null},r.prototype._touchCancel=function(t){this._handleTouch=!1,this._dragStart=this._touch1=this._touch2=null},r.prototype._mouseWheel=function(t){if(!this.isDisabled){t.preventDefault(),this._hideToolTip();var e=-t.deltaY;e=e>0?.1:-.1,this.zoom+=e}},r}(t.chart.FlexChartBase);e.FlexMap=i;var n=function(){function e(){this.maxY=(2*Math.atan(Math.exp(Math.PI))-.5*Math.PI)/r.toRadians}return e.prototype.convert=function(e){var i=this._convertX(e.x),n=Math.abs(e.y)>this.maxY?(e.y>0?1:-1)*this.maxY:e.y;return n=this._convertY(n),new t.Point(i,n)},e.prototype.convertBack=function(e){var i=this._convertBackX(e.x),n=this._convertBackY(e.y);return new t.Point(i,n)},e.prototype._convertX=function(t){return(t*r.toRadians+Math.PI)/r.pi2},e.prototype._convertBackX=function(t){return(t*r.pi2-Math.PI)/r.toRadians},e.prototype._convertY=function(t){return(Math.PI+Math.log(Math.tan(r.pi4-.5*t*r.toRadians)))/r.pi2},e.prototype._convertBackY=function(t){return-(2*Math.atan(Math.exp(t*r.pi2-Math.PI))-.5*Math.PI)/r.toRadians},e}(),r=function(){function t(){}return t.toRadians=Math.PI/180,t.pi4=.25*Math.PI,t.pi2=2*Math.PI,t}()}((e=t.chart||(t.chart={})).map||(e.map={}))}(wijmo||(wijmo={})),function(t){!function(t){t.map||(t.map={})}(t.chart||(t.chart={}))}(wijmo||(wijmo={})),function(t){var e;!function(e){var i=function(){function e(){this.itemsSourceChanged=new t.Event}return Object.defineProperty(e.prototype,"map",{get:function(){return this._map},set:function(t){this._map=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style!=t&&(this._style=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._setItems(t)},enumerable:!0,configurable:!0}),e.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url!=e&&(this._url=t.asString(e,!0),this._loadUrl())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorScale",{get:function(){return this._colorScale},set:function(t){this._colorScale!=t&&(this._colorScale=t,this._clearCache(),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.render=function(t,e,i){},e.prototype.invalidate=function(){this.map&&this.map.invalidate()},e.prototype.initialize=function(e){t.copy(this,e)},e.prototype._applyStyle=function(t){this.style&&(t.fill=this.style.fill,t.stroke=this.style.stroke,t.strokeWidth=this.style.strokeWidth)},e.prototype._clearCache=function(){},e.prototype._loadUrl=function(){var e=this;this.url?t.httpRequest(this.url,{success:function(t){return e.itemsSource=JSON.parse(t.responseText)}}):this.itemsSource=null},e.prototype._setItems=function(e){this._items!=e&&(this._clearCache(),this._items=e,this.onItemsSourceChanged(new t.EventArgs),this.invalidate())},e}();e.MapLayerBase=i}((e=t.chart||(t.chart={})).map||(e.map={}))}(wijmo||(wijmo={})),function(t){var e;!function(e){"use strict";var i=function(i){function n(t){var e=i.call(this)||this;return e._symbolSize=5,e._symbolMinSize=5,e._symbolMaxSize=50,e._index=0,e._prefix="_",e._elMap={},e._hasBindings=!1,e.style={stroke:"grey",strokeWidth:.5,fill:"transparent"},e.initialize(t),e}return __extends(n,i),Object.defineProperty(n.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(e){this._symbolSize!=e&&(this._symbolSize=t.asNumber(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"symbolMinSize",{get:function(){return this._symbolMinSize},set:function(e){this._symbolMinSize!=e&&(this._symbolMinSize=t.asNumber(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"symbolMaxSize",{get:function(){return this._symbolMaxSize},set:function(e){this._symbolMaxSize!=e&&(this._symbolMaxSize=t.asNumber(e),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._setItems(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binding",{get:function(){return this._binding},set:function(e){this._binding!=e&&(this._binding=t.asString(e,!0),this.parseBindings(),this.invalidate())},enumerable:!0,configurable:!0}),n.prototype.render=function(t,i,n){this._elMap={},this._index=0,this._prefix=this.map.layers.indexOf(this).toString()+"_";var r=t.startGroup();this.map,this.map._mapRect,this._applyStyle(t);var o=this.itemsSource,s=o?o.length:0,a=this._xBnd,h=this._yBnd,c=this._cBnd,l=this._szBnd;l&&(this._szRange=e._Utils.getRange(o,l));var u=this.colorScale;if(u&&u.domain(o),a&&h||c)for(var p=0;p<s;p++){var f=o[p];if(f){var m=this.getItemPos(f);m&&(u&&(t.fill=u.convert(u.getValue(f))),this.renderItem(t,f,m.x,m.y))}this._index++}return t.endGroup(),r},n.prototype.renderItem=function(e,i,n,r){if(t.isNumber(n)&&t.isNumber(r)){var o=this.map.convert(new t.Point(n,r));if(isFinite(o.x)&&isFinite(o.y)){var s=this.symbolSize;if(this._szRange){var a=this._szBnd.getValue(i);a=Math.sqrt((a-this._szRange.min)/this._szRange.range),s=this.symbolMinSize+(this.symbolMaxSize-this.symbolMinSize)*a}if(isFinite(s)){var h=e.drawEllipse(o.x,o.y,.5*s,.5*s);h.setAttribute("vector-effect","non-scaling-stroke");var c=this.createId();this.setId(h,c),this._elMap[c]=h}}}},n.prototype.getItemById=function(e){var i=this.itemsSource;if(i&&this._elMap[e]){var n=parseInt(e.split("_")[1]);if(t.isNumber(n)&&n<i.length)return i[n]}return null},n.prototype.getGeoBBox=function(){var e=this.itemsSource,i=e?e.length:0;if(this._hasBindings){for(var n=NaN,r=NaN,o=NaN,s=NaN,a=0;a<i;a++){var h=e[a];if(h){var c=this.getItemPos(h);c&&(isFinite(c.x)&&((isNaN(n)||c.x<n)&&(n=c.x),(isNaN(r)||c.x>r)&&(r=c.x)),isFinite(c.y)&&((isNaN(o)||c.y<o)&&(o=c.y),(isNaN(s)||c.y>s)&&(s=c.y)))}}if(!isNaN(n)&&!isNaN(o))return new t.Rect(n,o,r-n,s-o)}return null},n.prototype.getItemPos=function(e){var i=this._xBnd,n=this._yBnd,r=this._cBnd;if(r){var o=r.getValue(e);if(o){var s=o.split(",");if(s&&s.length>=2){var a=parseFloat(s[0]),h=parseFloat(s[1]);if(isFinite(a)&&isFinite(h))return new t.Point(a,h)}}}else if(a=i.getValue(e),h=n.getValue(e),t.isString(a)&&(a=parseFloat(a)),t.isString(h)&&(h=parseFloat(h)),isFinite(a)&&isFinite(h))return new t.Point(a,h);return null},n.prototype.setId=function(t,e){t&&e&&t.setAttribute("wj-map:id",e)},n.prototype.createId=function(){return this._prefix+this._index.toString()},n.prototype.parseBindings=function(){var e=this.binding;if(this._xBnd=this._yBnd=this._szBnd=null,this._hasBindings=!1,e){var i=e.split(",");1==i.length?(this._cBnd=new t.Binding(i[0].trim()),this._hasBindings=!0):i.length>=2&&(this._xBnd=new t.Binding(i[0].trim()),this._yBnd=new t.Binding(i[1].trim()),this._hasBindings=!0,i.length>=3&&(this._szBnd=new t.Binding(i[2].trim())))}},n}(e.MapLayerBase);e.ScatterMapLayer=i}((e=t.chart||(t.chart={})).map||(e.map={}))}(wijmo||(wijmo={})),function(t){var e;!function(e){"use strict";var i=function(){function e(){this._map={},this._index=0,this.prefix="_",this.hasPoints=!1,this.symbolSize=5}return e.prototype.convert=function(t){return this.converter&&(t=this.converter.convert(t)),t},e.prototype.render=function(t,e,i){if(void 0===i&&(i=null),this._map={},this._index=0,this.hasPoints=!1,e)switch(e.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":this.renderGeometry(t,e);break;case"Feature":this.renderFeature(t,e,i);break;case"FeatureCollection":if(e.features)for(var n=0;n<e.features.length;n++)this.renderFeature(t,e.features[n],i)}},e.prototype.renderFeature=function(t,e,i){if(void 0===i&&(i=null),e&&e.geometry){i&&i(t,e);var n=this.createId();this.renderGeometry(t,e.geometry,n),this._map[n]=e,this._index++}},e.prototype.renderGeometry=function(t,e,i){if(void 0===i&&(i=null),e)switch(e.type){case"Point":this.renderPoint(t,e,i),this.hasPoints=!0;break;case"MultiPoint":this.renderMultiPoint(t,e,i),this.hasPoints=!0;break;case"LineString":this.renderLineString(t,e,i);break;case"MultiLineString":this.renderMultiLineString(t,e,i);break;case"Polygon":this.renderPolygon(t,e,i);break;case"MultiPolygon":this.renderMultiPolygon(t,e,i);break;case"GeometryCollection":if(e.geometries)for(var n=0;n<e.geometries.length;n++)this.renderGeometry(t,e.geometries[n],i)}},e.prototype.renderPoint=function(e,i,n){if(void 0===n&&(n=null),i&&i.coordinates&&i.coordinates.length>=2){var r=new t.Point(i.coordinates[0],i.coordinates[1]);r=this.convert(r);var o=e.scale*this.symbolSize,s=e.drawEllipse(r.x,r.y,o,o);s.setAttribute("vector-effect","non-scaling-stroke"),this.setAttribute(s,n)}},e.prototype.renderMultiPoint=function(e,i,n){if(void 0===n&&(n=null),i&&i.coordinates)for(var r=i.coordinates,o=i.coordinates.length,s=0;s<o;s++){var a=new t.Point(r[s][0],r[s][1]);a=this.convert(a);var h=e.scale*this.symbolSize,c=e.drawEllipse(a.x,a.y,h,h);this.setAttribute(c,n)}},e.prototype.renderLineString=function(e,i,n){if(void 0===n&&(n=null),i&&i.coordinates){for(var r=i.coordinates,o=i.coordinates.length,s=[],a=[],h=0;h<o;h++){var c=new t.Point(r[h][0],r[h][1]);c=this.convert(c),s.push(c.x),a.push(c.y)}var l=e.drawLines(s,a);this.setAttribute(l,n)}},e.prototype.renderMultiLineString=function(e,i,n){if(void 0===n&&(n=null),i&&i.coordinates)for(var r=i.coordinates,o=r.length,s=0;s<o;s++){for(var a=r[s],h=[],c=[],l=0;l<a.length;l++){var u=new t.Point(a[l][0],a[l][1]);u=this.convert(u),h.push(u.x),c.push(u.y)}var p=e.drawLines(h,c);this.setAttribute(p,n)}},e.prototype.renderMultiPolygon=function(e,i,n){if(void 0===n&&(n=null),i&&i.coordinates)for(var r=i.coordinates,o=r.length,s=e,a=0;a<o;a++){for(var h=r[a],c=(h.length,[]),l=0;l<1;l++){for(var u=h[l],p=[],f=0;f<u.length;f++){var m=new t.Point(u[f][0],u[f][1]);m=this.convert(m),p.push(m.x),p.push(m.y)}c.push(p)}var _=s.drawPolygon2(null,c);this.setAttribute(_,n)}},e.prototype.renderPolygon=function(e,i,n){if(void 0===n&&(n=null),i&&i.coordinates){for(var r=i.coordinates,o=r.length,s=e,a=[],h=0;h<o;h++){for(var c=r[h],l=[],u=0;u<c.length;u++){var p=new t.Point(c[u][0],c[u][1]);p=this.convert(p),l.push(p.x),l.push(p.y)}a.push(l)}var f=s.drawPolygon2(null,a);this.setAttribute(f,n)}},e.prototype.getFeatureById=function(t){return this._map[t]},e.prototype.getAllFeatures=function(t){var e=[];if(t)switch(t.type){case"Feature":e.push(t);break;case"FeatureCollection":if(t.features)for(var i=0;i<t.features.length;i++)e.push(t.features[i])}return e},e.prototype.getBBox=function(t){var e=null;if(t)switch(t.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":case"GeometryCollection":e=this.getGeometryBBox(t);break;case"Feature":e=this.getGeometryBBox(t.geometry);break;case"FeatureCollection":if(t.features)for(var i=0;i<t.features.length;i++){var n=this.getGeometryBBox(t.features[i].geometry,e);n&&(e=n)}}return e},e.prototype.getGeometryBBox=function(t,e){var i=null;if(t)switch(t.type){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":var n=t.coordinates,r=this.flat(n,10);i=this.getRect(r,e);break;case"GeometryCollection":if(t.geometries)for(var o=0;o<t.geometries.length;o++)(i=this.getGeometryBBox(t.geometries[o],e))&&(e=i.clone())}return i},e.prototype.getRect=function(e,i){var n=null;if(e){var r=NaN,o=NaN,s=NaN,a=NaN;i&&(r=i.left,o=i.right,s=i.top,a=i.bottom);for(var h=e.length/2,c=0;c<h;c++){var l=e[2*c],u=e[2*c+1];(isNaN(r)||l<r)&&(r=l),(isNaN(o)||l>o)&&(o=l),(isNaN(s)||u<s)&&(s=u),(isNaN(a)||u>a)&&(a=u)}isNaN(r)||isNaN(s)||(n=new t.Rect(r,s,o-r,a-s))}return n},e.prototype.setAttribute=function(t,e){t&&e&&t.setAttribute("wj-map:id",e)},e.prototype.createId=function(){return this.prefix+this._index.toString()},e.prototype.flat=function(t,e){if(t.flat)return t.flat(e);for(var i=t.slice(),n=[];i.length;){var r=i.pop();Array.isArray(r)?i.push.apply(i,r):n.push(r)}return n.reverse()},e}();e._GeoJsonRender=i}((e=t.chart||(t.chart={})).map||(e.map={}))}(wijmo||(wijmo={})),function(t){var e;!function(e){"use strict";var i=function(i){function n(t){var n=i.call(this)||this;return n._render=new e._GeoJsonRender,n._symbolSize=5,n.style={stroke:"gray",fill:"transparent",strokeWidth:.5},t&&n.initialize(t),n}return __extends(n,i),Object.defineProperty(n.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(e){this._ifmt!=e&&(this._ifmt=t.asFunction(e,!0),this._clearCache(),this.invalidate())},enumerable:!0,configurable:!0}),n.prototype.getAllFeatures=function(){return this._render.getAllFeatures(this.itemsSource)},n.prototype.render=function(t,e,i){this._render.hasPoints&&this._clearCache();var n=this._g;if(n)i.appendChild(n);else{n=t.startGroup(),this._render.symbolSize=this.symbolSize,this._render.converter=this.map._proj;var r=this.colorScale;r&&r.domain(this.getAllFeatures()),this._applyStyle(t),this._render.prefix=this.map.layers.indexOf(this).toString()+"_",r?this._render.render(t,this.itemsSource,(function(t,e){t.fill=r.convert(r.getValue(e))})):this._render.render(t,this.itemsSource,this.itemFormatter),t.endGroup(),this._g=n}return 0==n.transform.baseVal.numberOfItems?n.transform.baseVal.appendItem(e):n.transform.baseVal.replaceItem(e,0),n},n.prototype.getGeoBBox=function(t){return t?this._render.getBBox(t):this._render.getBBox(this.itemsSource)},Object.defineProperty(n.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(e){this._symbolSize!=e&&(this._symbolSize=t.asNumber(e),this.invalidate())},enumerable:!0,configurable:!0}),n.prototype._clearCache=function(){this._g=null},n.prototype._getFeatureById=function(t){return this._render.getFeatureById(t)},n}(e.MapLayerBase);e.GeoMapLayer=i}((e=t.chart||(t.chart={})).map||(e.map={}))}(wijmo||(wijmo={})),function(t){var e;!function(e){"use strict";var i=function(e){function i(){var t=e.call(this)||this;return t.style={stroke:"lightgrey",strokeWidth:.5,fill:"lightgrey"},t}return __extends(i,e),i.prototype.render=function(e,i,n){var r=e.startGroup("wj-flexmap-geogrid"),o=this.map,s=this.map._mapRect,a="wj-label";this._applyStyle(e);for(var h=-180;h<=180;h+=30){var c=o.convert(new t.Point(h,-85)),l=o.convert(new t.Point(h,85));if(this.isValid(c)&&this.isValid(l)){var u=h.toString(),p=e.measureString(u,a);e.drawString(u,new t.Point(c.x-.5*p.width,s.top+p.height),a),e.drawLine(c.x,c.y,l.x,l.y)}}for(var f=s.left,m=-80;m<=80;m+=20)c=o.convert(new t.Point(-180,m)),l=o.convert(new t.Point(180,m)),this.isValid(c)&&this.isValid(l)&&(u=f.toString(),p=e.measureString(u,a),e.drawString(m.toString(),new t.Point(f,c.y+.5*p.height),a),e.drawLine(c.x,c.y,l.x,l.y));return e.endGroup(),r},i.prototype.isValid=function(t){return isFinite(t.x)&&isFinite(t.y)},i}(e.MapLayerBase);e.GeoGridLayer=i}((e=t.chart||(t.chart={})).map||(e.map={}))}(wijmo||(wijmo={})),function(t){var e;(e=t.chart||(t.chart={})).map||(e.map={}),t._registerModule("wijmo.chart.map",t.chart.map)}(wijmo||(wijmo={}));