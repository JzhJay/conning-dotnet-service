import{__assign,__decorate,__extends}from"tslib";import classNames from"classnames";import*as React from"react";import{polyfill}from"react-lifecycles-compat";import{AbstractPureComponent2,Classes}from"../../common";import*as Errors from"../../common/errors";import{DISPLAYNAME_PREFIX,removeNonHTMLProps}from"../../common/props";import{Icon}from"../icon/icon";import{AsyncControllableInput}from"./asyncControllableInput";var InputGroup=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={},e.leftElement=null,e.rightElement=null,e.refHandlers={leftElement:function(t){return e.leftElement=t},rightElement:function(t){return e.rightElement=t}},e}return __extends(e,t),e.prototype.render=function(){var t,e=this.props,n=e.asyncControl,s=void 0!==n&&n,l=e.className,r=e.disabled,i=e.fill,o=e.inputRef,a=e.intent,m=e.large,p=e.small,c=e.round,h=classNames(Classes.INPUT_GROUP,Classes.intentClass(a),((t={})[Classes.DISABLED]=r,t[Classes.FILL]=i,t[Classes.LARGE]=m,t[Classes.SMALL]=p,t[Classes.ROUND]=c,t),l),f=__assign(__assign({},this.props.style),{paddingLeft:this.state.leftElementWidth,paddingRight:this.state.rightElementWidth}),E=__assign(__assign({type:"text"},removeNonHTMLProps(this.props)),{className:Classes.INPUT,style:f});return React.createElement("div",{className:h},this.maybeRenderLeftElement(),s?React.createElement(AsyncControllableInput,__assign({},E,{inputRef:o})):React.createElement("input",__assign({},E,{ref:o})),this.maybeRenderRightElement())},e.prototype.componentDidMount=function(){this.updateInputWidth()},e.prototype.componentDidUpdate=function(t){var e=this.props,n=e.leftElement,s=e.rightElement;t.leftElement===n&&t.rightElement===s||this.updateInputWidth()},e.prototype.validateProps=function(t){null!=t.leftElement&&null!=t.leftIcon&&console.warn(Errors.INPUT_WARN_LEFT_ELEMENT_LEFT_ICON_MUTEX)},e.prototype.maybeRenderLeftElement=function(){var t=this.props,e=t.leftElement,n=t.leftIcon;return null!=e?React.createElement("span",{className:Classes.INPUT_LEFT_CONTAINER,ref:this.refHandlers.leftElement},e):null!=n?React.createElement(Icon,{icon:n}):void 0},e.prototype.maybeRenderRightElement=function(){var t=this.props.rightElement;if(null!=t)return React.createElement("span",{className:Classes.INPUT_ACTION,ref:this.refHandlers.rightElement},t)},e.prototype.updateInputWidth=function(){var t=this.state,e=t.leftElementWidth,n=t.rightElementWidth;if(null!=this.leftElement){var s=this.leftElement.clientWidth;(void 0===e||Math.abs(s-e)>2)&&this.setState({leftElementWidth:s})}else this.setState({leftElementWidth:void 0});null!=this.rightElement?(s=this.rightElement.clientWidth,(void 0===n||Math.abs(s-n)>2)&&this.setState({rightElementWidth:s})):this.setState({rightElementWidth:void 0})},e.displayName=DISPLAYNAME_PREFIX+".InputGroup",__decorate([polyfill],e)}(AbstractPureComponent2);export{InputGroup};