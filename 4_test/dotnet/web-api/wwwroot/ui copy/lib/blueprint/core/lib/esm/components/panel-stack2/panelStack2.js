import{__spreadArrays}from"tslib";import classNames from"classnames";import*as React from"react";import{CSSTransition,TransitionGroup}from"react-transition-group";import{Classes,DISPLAYNAME_PREFIX}from"../../common";import{PanelView2}from"./panelView2";export var PanelStack2=function(e){var a=e.renderActivePanelOnly,n=void 0===a||a,t=e.showPanelHeader,r=void 0===t||t,l=e.stack,s=React.useState("push"),o=s[0],c=s[1],i=React.useState(void 0!==e.initialPanel?[e.initialPanel]:[]),u=i[0],m=i[1],p=React.useMemo((function(){return null!=l?l.slice().reverse():u}),[u,l]),f=React.useRef(p.length);React.useEffect((function(){p.length!==f.current&&c(p.length-f.current<0?"pop":"push"),f.current=p.length}),[p]);var v=React.useCallback((function(a){var n;null===(n=e.onOpen)||void 0===n||n.call(e,a),null==e.stack&&m((function(e){return __spreadArrays([a],e)}))}),[e.onOpen]),P=React.useCallback((function(a){var n;p[0]!==a||p.length<=1||(null===(n=e.onClose)||void 0===n||n.call(e,a),null==e.stack&&m((function(e){return e.slice(1)})))}),[p,e.onClose]);if(0===p.length)return null;var C=(n?[p[0]]:p).map((function(e,a){var t=p.length-a,l=n?p.length:t;return React.createElement(CSSTransition,{classNames:Classes.PANEL_STACK2,key:l,timeout:400},React.createElement(PanelView2,{onClose:P,onOpen:v,panel:e,previousPanel:p[a+1],showHeader:r}))})).reverse(),R=classNames(Classes.PANEL_STACK2,Classes.PANEL_STACK2+"-"+o,e.className);return React.createElement(TransitionGroup,{className:R,component:"div"},C)};PanelStack2.displayName=DISPLAYNAME_PREFIX+".PanelStack2";