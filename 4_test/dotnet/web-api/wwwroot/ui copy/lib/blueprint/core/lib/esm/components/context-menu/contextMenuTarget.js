import{__extends}from"tslib";import*as React from"react";import*as ReactDOM from"react-dom";import{CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT,CONTEXTMENU_WARN_DECORATOR_NO_METHOD}from"../../common/errors";import{getDisplayName,isFunction}from"../../common/utils";import{isDarkTheme}from"../../common/utils/isDarkTheme";import*as ContextMenu from"./contextMenu";export function ContextMenuTarget(e){var t;return isFunction(e.prototype.renderContextMenu)||console.warn(CONTEXTMENU_WARN_DECORATOR_NO_METHOD),t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){var t=this,n=e.prototype.render.call(this);if(null==n)return n;if(!React.isValidElement(n))return console.warn(CONTEXTMENU_WARN_DECORATOR_NEEDS_REACT_ELEMENT),n;var o=n.props.onContextMenu;return React.cloneElement(n,{onContextMenu:function(e){if(!e.defaultPrevented){if(isFunction(t.renderContextMenu)){var n=t.renderContextMenu(e);if(null!=n){var r=isDarkTheme(ReactDOM.findDOMNode(t));e.preventDefault(),ContextMenu.show(n,{left:e.clientX,top:e.clientY},t.onContextMenuClose,r)}}null==o||o(e)}}})},t}(e),t.displayName="ContextMenuTarget("+getDisplayName(e)+")",t}