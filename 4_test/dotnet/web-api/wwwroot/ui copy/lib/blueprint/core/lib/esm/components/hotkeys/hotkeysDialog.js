import{__assign}from"tslib";import classNames from"classnames";import*as React from"react";import*as ReactDOM from"react-dom";import{Classes}from"../../common";import{Dialog}from"../../components";import{Hotkey}from"./hotkey";import{Hotkeys}from"./hotkeys";var DELAY_IN_MS=10,HotkeysDialog=function(){function e(){var e=this;this.componentProps={globalHotkeysGroup:"Global hotkeys"},this.container=null,this.hotkeysQueue=[],this.isDialogShowing=!1,this.show=function(){e.isDialogShowing=!0,e.render()},this.hide=function(){e.isDialogShowing=!1,e.render()}}return e.prototype.render=function(){null==this.container&&(this.container=this.getContainer()),ReactDOM.render(this.renderComponent(),this.container)},e.prototype.unmount=function(){null!=this.container&&(ReactDOM.unmountComponentAtNode(this.container),this.container.remove(),this.container=null)},e.prototype.enqueueHotkeysForDisplay=function(e){this.hotkeysQueue.push(e),window.clearTimeout(this.showTimeoutToken),this.showTimeoutToken=window.setTimeout(this.show,DELAY_IN_MS)},e.prototype.hideAfterDelay=function(){window.clearTimeout(this.hideTimeoutToken),this.hideTimeoutToken=window.setTimeout(this.hide,DELAY_IN_MS)},e.prototype.isShowing=function(){return this.isDialogShowing},e.prototype.getContainer=function(){return null==this.container&&(this.container=document.createElement("div"),this.container.classList.add(Classes.PORTAL),document.body.appendChild(this.container)),this.container},e.prototype.renderComponent=function(){return React.createElement(Dialog,__assign({},this.componentProps,{className:classNames(Classes.HOTKEY_DIALOG,this.componentProps.className),isOpen:this.isDialogShowing,onClose:this.hide}),React.createElement("div",{className:Classes.DIALOG_BODY},this.renderHotkeys()))},e.prototype.renderHotkeys=function(){var e=this,t=this.emptyHotkeyQueue().map((function(t,o){var n=!0===t.global&&null==t.group?e.componentProps.globalHotkeysGroup:t.group;return React.createElement(Hotkey,__assign({key:o},t,{group:n}))}));return React.createElement(Hotkeys,null,t)},e.prototype.emptyHotkeyQueue=function(){var e=this.hotkeysQueue.reduce((function(e,t){return e.concat(t)}),[]);return this.hotkeysQueue.length=0,e},e}(),HOTKEYS_DIALOG=new HotkeysDialog;export function isHotkeysDialogShowing(){return HOTKEYS_DIALOG.isShowing()}export function setHotkeysDialogProps(e){for(var t in e)e.hasOwnProperty(t)&&(HOTKEYS_DIALOG.componentProps[t]=e[t])}export function showHotkeysDialog(e){HOTKEYS_DIALOG.enqueueHotkeysForDisplay(e)}export function hideHotkeysDialog(){HOTKEYS_DIALOG.hide()}export function hideHotkeysDialogAfterDelay(){HOTKEYS_DIALOG.hideAfterDelay()}