import classNames from"classnames";import*as React from"react";import{CSSTransition,TransitionGroup}from"react-transition-group";import{Classes,DISPLAYNAME_PREFIX}from"../../common";import{PanelView2}from"./panelView2";export const PanelStack2=e=>{const{renderActivePanelOnly:a=!0,showPanelHeader:t=!0,stack:n}=e,[s,l]=React.useState("push"),[r,c]=React.useState(void 0!==e.initialPanel?[e.initialPanel]:[]),o=React.useMemo((()=>null!=n?n.slice().reverse():r),[r,n]),i=React.useRef(o.length);React.useEffect((()=>{o.length!==i.current&&l(o.length-i.current<0?"pop":"push"),i.current=o.length}),[o]);const m=React.useCallback((a=>{e.onOpen?.(a),null==e.stack&&c((e=>[a,...e]))}),[e.onOpen]),u=React.useCallback((a=>{o[0]!==a||o.length<=1||(e.onClose?.(a),null==e.stack&&c((e=>e.slice(1))))}),[o,e.onClose]);if(0===o.length)return null;const p=(a?[o[0]]:o).map(((e,n)=>{const s=o.length-n,l=a?o.length:s;return React.createElement(CSSTransition,{classNames:Classes.PANEL_STACK2,key:l,timeout:400},React.createElement(PanelView2,{onClose:u,onOpen:m,panel:e,previousPanel:o[n+1],showHeader:t}))})).reverse(),P=classNames(Classes.PANEL_STACK2,`${Classes.PANEL_STACK2}-${s}`,e.className);return React.createElement(TransitionGroup,{className:P,component:"div"},p)};PanelStack2.displayName=`${DISPLAYNAME_PREFIX}.PanelStack2`;