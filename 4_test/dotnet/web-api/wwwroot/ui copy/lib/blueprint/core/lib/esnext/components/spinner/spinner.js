import{__decorate}from"tslib";import classNames from"classnames";import*as React from"react";import{polyfill}from"react-lifecycles-compat";import{AbstractPureComponent2,Classes}from"../../common";import{SPINNER_WARN_CLASSES_SIZE}from"../../common/errors";import{DISPLAYNAME_PREFIX}from"../../common/props";import{clamp}from"../../common/utils";export var SpinnerSize;!function(e){e[e.SMALL=20]="SMALL",e[e.STANDARD=50]="STANDARD",e[e.LARGE=100]="LARGE"}(SpinnerSize||(SpinnerSize={}));const R=45,SPINNER_TRACK="M 50,50 m 0,-45 a 45,45 0 1 1 0,90 a 45,45 0 1 1 0,-90",PATH_LENGTH=280,MIN_SIZE=10,STROKE_WIDTH=4,MIN_STROKE_WIDTH=16;let Spinner=class extends AbstractPureComponent2{componentDidUpdate(e){e.value!==this.props.value&&this.forceUpdate()}render(){const{className:e,intent:s,value:t,tagName:n="div"}=this.props,a=this.getSize(),r=classNames(Classes.SPINNER,Classes.intentClass(s),{[Classes.SPINNER_NO_SPIN]:null!=t},e),i=Math.min(16,4*SpinnerSize.LARGE/a),S=280-280*(null==t?.25:clamp(t,0,1));return React.createElement(n,{className:r,role:"progressbar"},React.createElement(n,{className:Classes.SPINNER_ANIMATION},React.createElement("svg",{width:a,height:a,strokeWidth:i.toFixed(2),viewBox:this.getViewBox(i)},React.createElement("path",{className:Classes.SPINNER_TRACK,d:SPINNER_TRACK}),React.createElement("path",{className:Classes.SPINNER_HEAD,d:SPINNER_TRACK,pathLength:280,strokeDasharray:"280 280",strokeDashoffset:S}))))}validateProps({className:e="",size:s}){null!=s&&(e.indexOf(Classes.SMALL)>=0||e.indexOf(Classes.LARGE)>=0)&&console.warn(SPINNER_WARN_CLASSES_SIZE)}getSize(){const{className:e="",size:s}=this.props;return null==s?e.indexOf(Classes.SMALL)>=0?SpinnerSize.SMALL:e.indexOf(Classes.LARGE)>=0?SpinnerSize.LARGE:SpinnerSize.STANDARD:Math.max(10,s)}getViewBox(e){const s=R+e/2,t=(50-s).toFixed(2),n=(2*s).toFixed(2);return`${t} ${t} ${n} ${n}`}};Spinner.displayName=`${DISPLAYNAME_PREFIX}.Spinner`,Spinner.SIZE_SMALL=SpinnerSize.SMALL,Spinner.SIZE_STANDARD=SpinnerSize.STANDARD,Spinner.SIZE_LARGE=SpinnerSize.LARGE,Spinner=__decorate([polyfill],Spinner);export{Spinner};