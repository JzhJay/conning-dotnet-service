"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CollapsibleList=void 0;var tslib_1=require("tslib"),classnames_1=tslib_1.__importDefault(require("classnames")),React=tslib_1.__importStar(require("react")),boundary_1=require("../../common/boundary"),Classes=tslib_1.__importStar(require("../../common/classes")),Errors=tslib_1.__importStar(require("../../common/errors")),position_1=require("../../common/position"),props_1=require("../../common/props"),utils_1=require("../../common/utils"),menu_1=require("../menu/menu"),menuItem_1=require("../menu/menuItem"),popover_1=require("../popover/popover"),CollapsibleList=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return tslib_1.__extends(r,e),r.prototype.render=function(){var e,r=this,o=this.props.collapseFrom,t=React.Children.count(this.props.children),s=this.partitionChildren(),i=s[0],n=s[1],l=i.map((function(e,s){var i=o===boundary_1.Boundary.START?t-1-s:s;return React.createElement("li",{className:r.props.visibleItemClassName,key:i},r.props.visibleItemRenderer(e.props,i))}));if(o===boundary_1.Boundary.START&&l.reverse(),n.length>0){var a=o===boundary_1.Boundary.END?position_1.Position.BOTTOM_RIGHT:position_1.Position.BOTTOM_LEFT;e=React.createElement("li",{className:this.props.visibleItemClassName},React.createElement(popover_1.Popover,tslib_1.__assign({content:React.createElement(menu_1.Menu,null,n),position:a},this.props.dropdownProps),this.props.dropdownTarget))}return React.createElement("ul",{className:classnames_1.default(Classes.COLLAPSIBLE_LIST,this.props.className)},o===boundary_1.Boundary.START?e:null,l,o===boundary_1.Boundary.END?e:null)},r.prototype.partitionChildren=function(){var e=React.Children.map(this.props.children,(function(e,r){if(!utils_1.isElementOfType(e,menuItem_1.MenuItem))throw new Error(Errors.COLLAPSIBLE_LIST_INVALID_CHILD);return React.cloneElement(e,{key:"visible-"+r})}));if(null==e)return[[],[]];this.props.collapseFrom===boundary_1.Boundary.START&&e.reverse();var r=this.props.visibleItemCount;return[e.slice(0,r),e.slice(r)]},r.displayName=props_1.DISPLAYNAME_PREFIX+".CollapsibleList",r.defaultProps={collapseFrom:boundary_1.Boundary.START,visibleItemCount:3},r}(React.Component);exports.CollapsibleList=CollapsibleList;