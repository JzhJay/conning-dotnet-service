"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tree=void 0;var tslib_1=require("tslib"),classnames_1=tslib_1.__importDefault(require("classnames")),React=tslib_1.__importStar(require("react")),Classes=tslib_1.__importStar(require("../../common/classes")),props_1=require("../../common/props"),utils_1=require("../../common/utils"),treeNode_1=require("./treeNode"),Tree=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.nodeRefs={},n.handleNodeCollapse=function(e,o){n.handlerHelper(n.props.onNodeCollapse,e,o)},n.handleNodeClick=function(e,o){n.handlerHelper(n.props.onNodeClick,e,o)},n.handleContentRef=function(e,o){null!=o?n.nodeRefs[e.props.id]=o:delete n.nodeRefs[e.props.id]},n.handleNodeContextMenu=function(e,o){n.handlerHelper(n.props.onNodeContextMenu,e,o)},n.handleNodeDoubleClick=function(e,o){n.handlerHelper(n.props.onNodeDoubleClick,e,o)},n.handleNodeExpand=function(e,o){n.handlerHelper(n.props.onNodeExpand,e,o)},n.handleNodeMouseEnter=function(e,o){n.handlerHelper(n.props.onNodeMouseEnter,e,o)},n.handleNodeMouseLeave=function(e,o){n.handlerHelper(n.props.onNodeMouseLeave,e,o)},n}return tslib_1.__extends(n,e),n.ofType=function(){return n},n.nodeFromPath=function(e,o){return 1===e.length?o[e[0]]:n.nodeFromPath(e.slice(1),o[e[0]].childNodes)},n.prototype.render=function(){return React.createElement("div",{className:classnames_1.default(Classes.TREE,this.props.className)},this.renderNodes(this.props.contents,[],Classes.TREE_ROOT))},n.prototype.getNodeContentElement=function(e){return this.nodeRefs[e]},n.prototype.renderNodes=function(e,n,o){var t=this;if(null==e)return null;var r=e.map((function(e,o){var r=n.concat(o),s=treeNode_1.TreeNode.ofType();return React.createElement(s,tslib_1.__assign({},e,{key:e.id,contentRef:t.handleContentRef,depth:r.length-1,onClick:t.handleNodeClick,onContextMenu:t.handleNodeContextMenu,onCollapse:t.handleNodeCollapse,onDoubleClick:t.handleNodeDoubleClick,onExpand:t.handleNodeExpand,onMouseEnter:t.handleNodeMouseEnter,onMouseLeave:t.handleNodeMouseLeave,path:r}),t.renderNodes(e.childNodes,r))}));return React.createElement("ul",{className:classnames_1.default(Classes.TREE_NODE_LIST,o)},r)},n.prototype.handlerHelper=function(e,o,t){utils_1.isFunction(e)&&e(n.nodeFromPath(o.props.path,this.props.contents),o.props.path,t)},n.displayName=props_1.DISPLAYNAME_PREFIX+".Tree",n}(React.Component);exports.Tree=Tree;