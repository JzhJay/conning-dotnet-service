"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hideHotkeysDialogAfterDelay=exports.hideHotkeysDialog=exports.showHotkeysDialog=exports.setHotkeysDialogProps=exports.isHotkeysDialogShowing=void 0;var tslib_1=require("tslib"),classnames_1=tslib_1.__importDefault(require("classnames")),React=tslib_1.__importStar(require("react")),ReactDOM=tslib_1.__importStar(require("react-dom")),common_1=require("../../common"),components_1=require("../../components"),hotkey_1=require("./hotkey"),hotkeys_1=require("./hotkeys"),DELAY_IN_MS=10,HotkeysDialog=function(){function e(){var e=this;this.componentProps={globalHotkeysGroup:"Global hotkeys"},this.container=null,this.hotkeysQueue=[],this.isDialogShowing=!1,this.show=function(){e.isDialogShowing=!0,e.render()},this.hide=function(){e.isDialogShowing=!1,e.render()}}return e.prototype.render=function(){null==this.container&&(this.container=this.getContainer()),ReactDOM.render(this.renderComponent(),this.container)},e.prototype.unmount=function(){null!=this.container&&(ReactDOM.unmountComponentAtNode(this.container),this.container.remove(),this.container=null)},e.prototype.enqueueHotkeysForDisplay=function(e){this.hotkeysQueue.push(e),window.clearTimeout(this.showTimeoutToken),this.showTimeoutToken=window.setTimeout(this.show,DELAY_IN_MS)},e.prototype.hideAfterDelay=function(){window.clearTimeout(this.hideTimeoutToken),this.hideTimeoutToken=window.setTimeout(this.hide,DELAY_IN_MS)},e.prototype.isShowing=function(){return this.isDialogShowing},e.prototype.getContainer=function(){return null==this.container&&(this.container=document.createElement("div"),this.container.classList.add(common_1.Classes.PORTAL),document.body.appendChild(this.container)),this.container},e.prototype.renderComponent=function(){return React.createElement(components_1.Dialog,tslib_1.__assign({},this.componentProps,{className:classnames_1.default(common_1.Classes.HOTKEY_DIALOG,this.componentProps.className),isOpen:this.isDialogShowing,onClose:this.hide}),React.createElement("div",{className:common_1.Classes.DIALOG_BODY},this.renderHotkeys()))},e.prototype.renderHotkeys=function(){var e=this,o=this.emptyHotkeyQueue().map((function(o,t){var i=!0===o.global&&null==o.group?e.componentProps.globalHotkeysGroup:o.group;return React.createElement(hotkey_1.Hotkey,tslib_1.__assign({key:t},o,{group:i}))}));return React.createElement(hotkeys_1.Hotkeys,null,o)},e.prototype.emptyHotkeyQueue=function(){var e=this.hotkeysQueue.reduce((function(e,o){return e.concat(o)}),[]);return this.hotkeysQueue.length=0,e},e}(),HOTKEYS_DIALOG=new HotkeysDialog;function isHotkeysDialogShowing(){return HOTKEYS_DIALOG.isShowing()}function setHotkeysDialogProps(e){for(var o in e)e.hasOwnProperty(o)&&(HOTKEYS_DIALOG.componentProps[o]=e[o])}function showHotkeysDialog(e){HOTKEYS_DIALOG.enqueueHotkeysForDisplay(e)}function hideHotkeysDialog(){HOTKEYS_DIALOG.hide()}function hideHotkeysDialogAfterDelay(){HOTKEYS_DIALOG.hideAfterDelay()}exports.isHotkeysDialogShowing=isHotkeysDialogShowing,exports.setHotkeysDialogProps=setHotkeysDialogProps,exports.showHotkeysDialog=showHotkeysDialog,exports.hideHotkeysDialog=hideHotkeysDialog,exports.hideHotkeysDialogAfterDelay=hideHotkeysDialogAfterDelay;