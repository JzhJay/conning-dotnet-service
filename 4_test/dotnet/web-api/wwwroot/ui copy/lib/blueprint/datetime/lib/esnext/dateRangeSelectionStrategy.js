import{Boundary}from"@blueprintjs/core";import{areSameDay}from"./common/dateUtils";export class DateRangeSelectionStrategy{static getNextState(e,a,t,r){return null!=r?this.getNextStateForBoundary(e,a,t,r):this.getDefaultNextState(e,a,t)}static getNextStateForBoundary(e,a,t,r){const n=this.getBoundaryDate(r,e),l=this.getOtherBoundary(r),u=this.getBoundaryDate(l,e);let o,s;if(null==n&&null==u)o=r,s=this.createRangeForBoundary(r,a,null);else if(null!=n&&null==u){const e=areSameDay(n,a)?null:a;o=r,s=this.createRangeForBoundary(r,e,null)}else if(null==n&&null!=u)if(areSameDay(a,u)){let e;t?(o=r,e=u):(o=l,e=null),s=this.createRangeForBoundary(r,e,e)}else this.isOverlappingOtherBoundary(r,a,u)?(o=l,s=this.createRangeForBoundary(r,u,a)):(o=r,s=this.createRangeForBoundary(r,a,u));else if(areSameDay(n,a)){const e=areSameDay(n,u)?null:u;o=r,s=this.createRangeForBoundary(r,null,e)}else if(areSameDay(a,u)){const[e,a]=t?[u,u]:[n,null];o=t?r:l,s=this.createRangeForBoundary(r,e,a)}else this.isOverlappingOtherBoundary(r,a,u)?(o=r,s=this.createRangeForBoundary(r,a,null)):(o=r,s=this.createRangeForBoundary(r,a,u));return{dateRange:s,boundary:o}}static getDefaultNextState(e,a,t){const[r,n]=e;let l;if(null==r&&null==n)l=[a,null];else if(null!=r&&null==n)l=this.createRange(a,r,t);else if(null==r&&null!=n)l=this.createRange(a,n,t);else{const e=areSameDay(r,a),t=areSameDay(n,a);l=e&&t?[null,null]:e?[null,n]:t?[r,null]:[a,null]}return{dateRange:l}}static getOtherBoundary(e){return e===Boundary.START?Boundary.END:Boundary.START}static getBoundaryDate(e,a){return e===Boundary.START?a[0]:a[1]}static isOverlappingOtherBoundary(e,a,t){return e===Boundary.START?a>t:a<t}static createRangeForBoundary(e,a,t){return e===Boundary.START?[a,t]:[t,a]}static createRange(e,a,t){return!t&&areSameDay(e,a)?[null,null]:e<a?[e,a]:[a,e]}}