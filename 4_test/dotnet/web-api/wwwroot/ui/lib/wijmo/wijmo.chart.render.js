/*! For license information please see wijmo.chart.render.js.LICENSE.txt */
var wijmo;!function(t){var e;(function(e){"use strict";var n=function(){function e(e,n){void 0===n&&(n=!1),this._strokeWidth=1,this._fontSize=null,this._fontFamily=null,this._cssPriority=!0,this._readOnly=!1,this._applyCanvasClip=function(t,e){var n=this._canvasRect[e];n&&(t.beginPath(),t.rect(n.left,n.top,n.width,n.height),t.clip(),t.closePath())},this._applyCanvasStyles=function(t,e,n,i,r){var a,l,o,s=this,h=s._canvas.getContext("2d"),p=s.stroke,y=s.fill,c=s.strokeWidth;e&&void 0!==e.stroke&&(p=e.stroke),e&&void 0!==e.fill&&(y=s._getOpacityColor(e.fill,e["fill-opacity"])),t&&(l=window.getComputedStyle(t),o=t.getBBox()),r?l?(h.fillStyle=l.fill,a=l.fontStyle+" "+l.fontWeight+" "+l.fontSize+" "+l.fontFamily,h.font=a):s.fontSize?(h.fillStyle=s.textFill,h.font=s.fontSize+" "+(s.fontFamily||"sans-serif")):s._canvasDefaultFont&&(h.fillStyle=s._canvasDefaultFont.textFill,a=s._canvasDefaultFont.fontSize+" "+s._canvasDefaultFont.fontFamily,h.font=a,h.font.replace(/\"/g,"'")!==a.replace(/\"/g,"'")&&(a=s._canvasDefaultFont.fontSize+" "+(h.font.split(" ")[1]||"sans-serif"),h.font=a)):(l&&(p=l.stroke&&"none"!==l.stroke?l.stroke:p,y=l.fill&&"none"!==l.fill?s._getOpacityColor(l.fill,l["fill-opacity"]):y,c=l.strokeWidth?l.strokeWidth:c),"none"!==p&&null!=p&&(this._applyColor("strokeStyle",p,o),h.lineWidth=+c.replace(/px/g,""),h.stroke()),i&&null!=y&&"transparent"!==y&&"none"!==y&&(this._applyColor("fillStyle",y,o),h.fill()))};var i=this;i._element=e,i._canvas=document.createElement("canvas"),i._svgEngine=new t.chart._SvgRenderEngine(e),i._element.appendChild(i._canvas),i._applyCSSStyles=n}return e.prototype.beginRender=function(){var t,e=this,n=e._svgEngine.element,i=e._element;e._applyCSSStyles&&(e._svgEngine.beginRender(),i=n),e._element.appendChild(n),e._canvasRect={},t=window.getComputedStyle(i),e._canvasDefaultFont={fontSize:t.fontSize,fontFamily:t.fontFamily,textFill:t.color}},e.prototype.endRender=function(){this._applyCSSStyles&&this._svgEngine.endRender(),this._svgEngine.element.parentNode.removeChild(this._svgEngine.element)},e.prototype.setViewportSize=function(t,e){var n=this,i=n._canvas;i.getContext("2d"),n.fill,n._applyCSSStyles&&n._svgEngine.setViewportSize(t,e),i.width=t,i.height=e},Object.defineProperty(e.prototype,"element",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(t){this._svgEngine.fill=t,this._fill=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._svgEngine.fontSize=t;var e=null==t||isNaN(t)?t:t+"px";this._fontSize=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._svgEngine.fontFamily=t,this._fontFamily=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._svgEngine.stroke=t,this._stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(t){this._svgEngine.strokeWidth=t,this._strokeWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFill",{get:function(){return this._textFill},set:function(t){this._svgEngine.textFill=t,this._textFill=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssPriority",{get:function(){return this._cssPriority},set:function(t){this._svgEngine.cssPriority=t,this._cssPriority=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=t},enumerable:!0,configurable:!0}),e.prototype.addClipRect=function(t,e){t&&e&&(this._applyCSSStyles&&this._svgEngine.addClipRect(t,e),this._canvasRect[e]=t.clone())},e.prototype.drawEllipse=function(t,e,n,i,r,a){if(!this.readOnly){var l,o=this._canvas.getContext("2d");return this._applyCSSStyles&&(l=this._svgEngine.drawEllipse(t,e,n,i,r,a)),o.save(),o.beginPath(),o.ellipse?o.ellipse(t,e,n,i,0,0,2*Math.PI):(o.translate(t,e),o.scale(1,i/n),o.translate(-t,-e),o.arc(t,e,n,0,2*Math.PI),o.scale(1,1)),this._applyCanvasStyles(l,a,r,!0),o.restore(),l}},e.prototype.drawRect=function(t,e,n,i,r,a,l){if(!this.readOnly){var o,s=this._canvas.getContext("2d");return this._applyCSSStyles&&(o=this._svgEngine.drawRect(t,e,n,i,r,a,l)),s.save(),this._applyCanvasClip(s,l),s.beginPath(),s.rect(t,e,n,i),this._applyCanvasStyles(o,a,r,!0),s.restore(),o}},e.prototype.drawLine=function(t,e,n,i,r,a){if(!this.readOnly){var l,o=this._canvas.getContext("2d");return this._applyCSSStyles&&(l=this._svgEngine.drawLine(t,e,n,i,r,a)),o.save(),o.beginPath(),o.moveTo(t,e),o.lineTo(n,i),this._applyCanvasStyles(l,a,r),o.restore(),l}},e.prototype.drawLines=function(t,e,n,i,r,a){if(t&&e&&0!==t.length&&0!==e.length&&!this.readOnly){var l,o,s=this._canvas.getContext("2d"),h=a||Math.min(t.length,e.length);for(this._applyCSSStyles&&(l=this._svgEngine.drawLines([0,1],[1,0],n,i,r)),s.save(),this._applyCanvasClip(s,r),s.beginPath(),s.moveTo(t[0],e[0]),o=1;o<h;o++)s.lineTo(t[o],e[o]);return this._applyCanvasStyles(l,i,n),s.restore(),l}},e.prototype.drawSplines=function(e,n,i,r,a,l){if(e&&n&&0!==e.length&&0!==n.length&&!this.readOnly){var o,s,h=this._canvas.getContext("2d"),p=new t.chart._Spline(e,n,l).calculate(),y=p.xs,c=p.ys,f=Math.min(y.length,c.length);for(this._applyCSSStyles&&(o=this._svgEngine.drawSplines([0,1],[1,0],i,r,a)),h.save(),this._applyCanvasClip(h,a),h.beginPath(),h.moveTo(y[0],c[0]),s=1;s<f;s++)h.lineTo(y[s],c[s]);return this._applyCanvasStyles(o,r,i),h.restore(),o}},e.prototype.drawPolygon=function(t,e,n,i,r){if(t&&e&&0!==t.length&&0!==e.length&&!this.readOnly){var a,l,o=this._canvas.getContext("2d"),s=Math.min(t.length,e.length);for(this._applyCSSStyles&&(a=this._svgEngine.drawPolygon(t,e,n,i,r)),o.save(),this._applyCanvasClip(o,r),o.beginPath(),o.moveTo(t[0],e[0]),l=1;l<s;l++)o.lineTo(t[l],e[l]);return o.closePath(),this._applyCanvasStyles(a,i,n,!0),o.restore(),a}},e.prototype.drawPieSegment=function(t,e,n,i,r,a,l,o){if(!this.readOnly){var s,h=this._canvas.getContext("2d"),p=i,y=i+r;return this._applyCSSStyles&&(s=this._svgEngine.drawPieSegment(t,e,n,i,r,a,l,o)),h.save(),this._applyCanvasClip(h,o),h.beginPath(),h.moveTo(t,e),h.arc(t,e,n,p,y,!1),h.lineTo(t,e),this._applyCanvasStyles(s,l,a,!0),h.restore(),s}},e.prototype.drawDonutSegment=function(e,n,i,r,a,l,o,s,h){if(!this.readOnly){var p,y,c,f=this._canvas.getContext("2d"),g=a,u=a+l;return this._applyCSSStyles&&(p=this._svgEngine.drawDonutSegment(e,n,i,r,a,l,o,s,h)),(y=new t.Point(e,n)).x+=r*Math.cos(g),y.y+=r*Math.sin(g),(c=new t.Point(e,n)).x+=r*Math.cos(u),c.y+=r*Math.sin(u),f.save(),this._applyCanvasClip(f,h),f.beginPath(),f.moveTo(y.x,y.y),f.arc(e,n,i,g,u,!1),f.lineTo(c.x,c.y),f.arc(e,n,r,u,g,!0),this._applyCanvasStyles(p,s,o,!0),f.restore(),p}},e.prototype.drawString=function(t,e,n,i){if(!this.readOnly){var r,a=this._canvas.getContext("2d");return this._applyCSSStyles&&(r=this._svgEngine.drawString(t,e,n,i)),a.save(),a.textBaseline="bottom",this._applyCanvasStyles(r,i,n,!0,!0),a.fillText(t,e.x,e.y),a.restore(),r}},e.prototype.drawStringRotated=function(t,e,n,i,r,a){if(!this.readOnly){var l,o=this._canvas.getContext("2d");return o.measureText(t),this._applyCSSStyles&&(l=this._svgEngine.drawStringRotated(t,e,n,i,r,a)),o.save(),o.textBaseline="bottom",o.translate(n.x,n.y),o.rotate(Math.PI/180*i),o.translate(-n.x,-n.y),this._applyCanvasStyles(l,a,r,!0,!0),o.fillText(t,e.x,e.y),o.restore(),l}},e.prototype.measureString=function(e,n,i,r){var a,l=l=this._canvas.getContext("2d");return this._applyCSSStyles?this._svgEngine.measureString(e,n,i,r):(this._applyCanvasStyles(null,null,n,!0,!0),a=l.measureText(e).width,new t.Size(a,1.5*parseInt(l.font)))},e.prototype.startGroup=function(t,e,n){void 0===n&&(n=!1);var i,r=this._canvas.getContext("2d");return this._applyCSSStyles&&(i=this._svgEngine.startGroup(t,e,n)),r.save(),this._applyCanvasClip(r,e),i},e.prototype.endGroup=function(){this._applyCSSStyles&&this._svgEngine.endGroup(),this._canvas.getContext("2d").restore()},e.prototype.drawImage=function(t,e,n,i,r){if(!this.readOnly){var a,l=this._canvas.getContext("2d"),o=new Image;return this._applyCSSStyles&&(a=this._svgEngine.drawImage(t,e,n,i,r)),o.onload=function(){l.drawImage(o,e,n,i,r)},o.src=t,a}},e.prototype._getOpacityColor=function(e,n){var i=new t.Color(e);return e.indexOf("url")>-1?this.fill:e.indexOf("-")>-1?(this.fill=e,e):(null!=n&&1===i.a&&(i.a=isNaN(n)?1:Number(n)),i.toString())},e.prototype._applyColor=function(e,n,r){var a=i.tryParse(n),l=this._canvas.getContext("2d");if(null!=a)if(t.isString(a)||null==r)l[e]=a;else{var o;if(null!=a.x1)o=a.relative?l.createLinearGradient(r.x+a.x1*r.width,r.y+a.y1*r.height,r.x+a.x2*r.width,r.y+a.y2*r.height):l.createLinearGradient(a.x1,a.y1,a.x2,a.y2);else if(null!=a.r)if(a.relative){var s=r.x+a.cx*r.width,h=r.y+a.cy*r.height,p=a.r*r.width,y=a.r*r.height/p,c=r.x+(null==a.fx?a.cx:a.fx)*r.width,f=r.y+(null==a.fy?a.cy:a.fy)*r.height,g=(null==a.fr?0:a.fr)*r.width,u=(null==a.fr?0:a.fr)*r.height,v=Math.min(g,u);o=l.createRadialGradient(c,f/y,v,s,h/y,p),l.setTransform(1,0,0,y,0,0)}else o=l.createRadialGradient(null==a.fx?a.cx:a.fx,null==a.fy?a.cy:a.fy,a.fr||0,a.cx,a.cy,a.r);a.colors&&a.colors.length>0&&null!=o&&a.colors.forEach((function(e){var n=new t.Color("#000000");null!=e.color&&(n=e.color),null!=e.opacity&&(n.a=e.opacity),o.addColorStop(e.offset,n.toString())})),l[e]=o}},e}();e._CanvasRenderEngine=n;var i=function(){function e(){}return e.tryParse=function(n){if(e.parsedColor[n])return e.parsedColor[n];if(null==n||-1===n.indexOf("-"))return n;var i,r=n.replace(/\s+/g,"").split(/\-/g),a=r[0][0],l=!1,o=r[0].match(/\(\S+\)/)[0].replace(/[\(\\)]/g,"").split(/\,/g);"l"===a||"L"===a?(i={x1:"0",y1:"0",x2:"0",y2:"0",colors:[]},"l"===a&&(l=!0),["x1","y1","x2","y2"].forEach((function(t,e){null!=o[e]&&(i[t]=+o[e])}))):"r"!==a&&"R"!==a||(i={cx:"0",cy:"0",r:"0",colors:[]},"r"===a&&(l=!0),["cx","cy","r","fx","fy","fr"].forEach((function(t,e){null!=o[e]&&""!==o[e]&&(i[t]=+o[e])}))),i.relative=l,e.parsedColor[n]=i;var s=r.length-1;return r.forEach((function(e,n){e.indexOf(")")>-1&&(e=e.match(/\)\S+/)[0].replace(")",""));var r=e.split(":"),a={color:new t.Color("#000000")};null!=r[0]&&(a.color=t.Color.fromString(r[0])),null!=r[1]?a.offset=+r[1]:a.offset=n/s,null!=r[2]&&(a.opacity=+r[2]),i.colors.push(a)})),i},e.parsedColor={},e}();if(t.chart.FlexChartBase&&t.chart.FlexChartBase.prototype&&t.chart.FlexChartBase.prototype._exportToImage){var r=t.chart.FlexChartBase.prototype._exportToImage;t.chart.FlexChartBase.prototype._exportToImage=function(t,e){if("svg"!==t){var i=this._bgColor(this.hostElement);this._isTransparent(i)&&(i="#ffffff");var a,l,o=new n(this.hostElement,!0);this._render(o,!1,i),a=(l=o.element).toDataURL("image/"+t),l.parentNode.removeChild(l),e.call(null,a),l=null,o=null}else r.call(this,t,e)}}})((e=t.chart||(t.chart={})).render||(e.render={}))}(wijmo||(wijmo={})),function(t){var e;(e=t.chart||(t.chart={})).render||(e.render={}),t._registerModule("wijmo.chart.render",t.chart.render)}(wijmo||(wijmo={}));