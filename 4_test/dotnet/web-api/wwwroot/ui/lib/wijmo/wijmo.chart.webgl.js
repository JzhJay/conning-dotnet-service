/*! For license information please see wijmo.chart.webgl.js.LICENSE.txt */
var wijmo,__extends=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();!function(t){var e;(function(t){"use strict";var e=function(){function t(){}return t.prototype.earcut=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),i=i||2;var r,n,o,s,a,h,u,f=e&&e.length,l=f?e[0]*i:t.length,p=this.linkedList(t,0,l,i,!0),c=[];if(!p||p.next===p.prev)return c;if(f&&(p=this.eliminateHoles(t,e,p,i)),t.length>80*i){r=o=t[0],n=s=t[1];for(var v=i;v<l;v+=i)(a=t[v])<r&&(r=a),(h=t[v+1])<n&&(n=h),a>o&&(o=a),h>s&&(s=h);u=0!==(u=Math.max(o-r,s-n))?1/u:0}return this.earcutLinked(p,c,i,r,n,u),c},t.prototype.linkedList=function(t,e,i,r,n){var o,s;if(n===this.signedArea(t,e,i,r)>0)for(o=e;o<i;o+=r)s=this.insertNode(o,t[o],t[o+1],s);else for(o=i-r;o>=e;o-=r)s=this.insertNode(o,t[o],t[o+1],s);return s&&this.equals(s,s.next)&&(this.removeNode(s),s=s.next),s},t.prototype.filterPoints=function(t,e){if(void 0===e&&(e=null),!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!this.equals(r,r.next)&&0!==this.area(r.prev,r,r.next))r=r.next;else{if(this.removeNode(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e},t.prototype.earcutLinked=function(t,e,i,r,n,o,s){if(void 0===s&&(s=null),t){!s&&o&&this.indexCurve(t,r,n,o);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,o?this.isEarHashed(t,r,n,o):this.isEar(t))e.push(a.i/i),e.push(t.i/i),e.push(h.i/i),this.removeNode(t),t=h.next,u=h.next;else if((t=h)===u){s?1===s?(t=this.cureLocalIntersections(this.filterPoints(t),e,i),this.earcutLinked(t,e,i,r,n,o,2)):2===s&&this.splitEarcut(t,e,i,r,n,o):this.earcutLinked(this.filterPoints(t),e,i,r,n,o,1);break}}},t.prototype.isEar=function(t){var e=t.prev,i=t,r=t.next;if(this.area(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(this.pointInTriangle(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&this.area(n.prev,n,n.next)>=0)return!1;n=n.next}return!0},t.prototype.isEarHashed=function(t,e,i,r){var n=t.prev,o=t,s=t.next;if(this.area(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,h=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,u=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,f=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,l=this.zOrder(a,h,e,i,r),p=this.zOrder(u,f,e,i,r),c=t.prevZ,v=t.nextZ;c&&c.z>=l&&v&&v.z<=p;){if(c!==t.prev&&c!==t.next&&this.pointInTriangle(n.x,n.y,o.x,o.y,s.x,s.y,c.x,c.y)&&this.area(c.prev,c,c.next)>=0)return!1;if(c=c.prevZ,v!==t.prev&&v!==t.next&&this.pointInTriangle(n.x,n.y,o.x,o.y,s.x,s.y,v.x,v.y)&&this.area(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;c&&c.z>=l;){if(c!==t.prev&&c!==t.next&&this.pointInTriangle(n.x,n.y,o.x,o.y,s.x,s.y,c.x,c.y)&&this.area(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;v&&v.z<=p;){if(v!==t.prev&&v!==t.next&&this.pointInTriangle(n.x,n.y,o.x,o.y,s.x,s.y,v.x,v.y)&&this.area(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0},t.prototype.cureLocalIntersections=function(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!this.equals(n,o)&&this.intersects(n,r,r.next,o)&&this.locallyInside(n,o)&&this.locallyInside(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),this.removeNode(r),this.removeNode(r.next),r=t=o),r=r.next}while(r!==t);return this.filterPoints(r)},t.prototype.splitEarcut=function(t,e,i,r,n,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&this.isValidDiagonal(s,a)){var h=this.splitPolygon(s,a);return s=this.filterPoints(s,s.next),h=this.filterPoints(h,h.next),this.earcutLinked(s,e,i,r,n,o),void this.earcutLinked(h,e,i,r,n,o)}a=a.next}s=s.next}while(s!==t)},t.prototype.eliminateHoles=function(t,e,i,r){var n,o,s,a,h,u=[];for(n=0,o=e.length;n<o;n++)s=e[n]*r,a=n<o-1?e[n+1]*r:t.length,(h=this.linkedList(t,s,a,r,!1))===h.next&&(h.steiner=!0),u.push(this.getLeftmost(h));for(u.sort(this.compareX),n=0;n<u.length;n++)this.eliminateHole(u[n],i),i=this.filterPoints(i,i.next);return i},t.prototype.compareX=function(t,e){return t.x-e.x},t.prototype.eliminateHole=function(t,e){if(e=this.findHoleBridge(t,e)){var i=this.splitPolygon(e,t);this.filterPoints(e,e.next),this.filterPoints(i,i.next)}},t.prototype.findHoleBridge=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s){if(s=a,a===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===s)return i;var h,u=i,f=i.x,l=i.y,p=1/0;r=i;do{n>=r.x&&r.x>=f&&n!==r.x&&this.pointInTriangle(o<l?n:s,o,f,l,o<l?s:n,o,r.x,r.y)&&(h=Math.abs(o-r.y)/(n-r.x),this.locallyInside(r,t)&&(h<p||h===p&&(r.x>i.x||r.x===i.x&&this.sectorContainsSector(i,r)))&&(i=r,p=h)),r=r.next}while(r!==u);return i},t.prototype.sectorContainsSector=function(t,e){return this.area(t.prev,t,e.prev)<0&&this.area(e.next,t,t.next)<0},t.prototype.indexCurve=function(t,e,i,r){var n=t;do{null===n.z&&(n.z=this.zOrder(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,this.sortLinked(n)},t.prototype.sortLinked=function(t){var e,i,r,n,o,s,a,h,u=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,r=i,a=0,e=0;e<u&&(a++,r=r.nextZ);e++);for(h=u;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,u*=2}while(s>1);return t},t.prototype.zOrder=function(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1},t.prototype.getLeftmost=function(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i},t.prototype.pointInTriangle=function(t,e,i,r,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(n-s)*(r-a)>=0},t.prototype.isValidDiagonal=function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!this.intersectsPolygon(t,e)&&(this.locallyInside(t,e)&&this.locallyInside(e,t)&&this.middleInside(t,e)&&(this.area(t.prev,t,e.prev)||this.area(t,e.prev,e))||this.equals(t,e)&&this.area(t.prev,t,t.next)>0&&this.area(e.prev,e,e.next)>0)},t.prototype.area=function(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)},t.prototype.equals=function(t,e){return t.x===e.x&&t.y===e.y},t.prototype.intersects=function(t,e,i,r){var n=this.sign(this.area(t,e,i)),o=this.sign(this.area(t,e,r)),s=this.sign(this.area(i,r,t)),a=this.sign(this.area(i,r,e));return n!==o&&s!==a||!(0!==n||!this.onSegment(t,i,e))||!(0!==o||!this.onSegment(t,r,e))||!(0!==s||!this.onSegment(i,t,r))||!(0!==a||!this.onSegment(i,e,r))},t.prototype.onSegment=function(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)},t.prototype.sign=function(t){return t>0?1:t<0?-1:0},t.prototype.intersectsPolygon=function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&this.intersects(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1},t.prototype.locallyInside=function(t,e){return this.area(t.prev,t,t.next)<0?this.area(t,e,t.next)>=0&&this.area(t,t.prev,e)>=0:this.area(t,e,t.prev)<0||this.area(t,t.next,e)<0},t.prototype.middleInside=function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r},t.prototype.splitPolygon=function(t,e){var r=new i(t.i,t.x,t.y),n=new i(e.i,e.x,e.y),o=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=o,o.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n},t.prototype.insertNode=function(t,e,r,n){var o=new i(t,e,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o},t.prototype.removeNode=function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)},t.prototype.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,s=Math.abs(this.signedArea(t,0,o,i));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*i,f=a<h-1?e[a+1]*i:t.length;s-=Math.abs(this.signedArea(t,u,f,i))}var l=0;for(a=0;a<r.length;a+=3){var p=r[a]*i,c=r[a+1]*i,v=r[a+2]*i;l+=Math.abs((t[p]-t[v])*(t[c+1]-t[p+1])-(t[p]-t[c])*(t[v+1]-t[p+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},t.prototype.signedArea=function(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n},t.prototype.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[n][o][s]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i},t}();t._EarCut=e;var i=function(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}})((e=t.chart||(t.chart={})).webgl||(e.webgl={}))}(wijmo||(wijmo={})),function(t){var e;(function(e){var i=function(e){function i(t){var i=e.call(this,t)||this;return i.primitives=[],i.clipRects={},i.init(),i}return __extends(i,e),i.prototype.beginRender=function(){e.prototype.beginRender.call(this),this.isIE?this.element.appendChild(this.canvas):this.element.appendChild(this.foCanvas);var t=this.gl;t.viewport(0,0,t.canvas.width,t.canvas.height),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA),this.primitives.forEach((function(t){return t.beginRender()})),this.clipRects={}},i.prototype.setViewportSize=function(t,i){e.prototype.setViewportSize.call(this,t,i),this.foCanvas&&(this.foCanvas.setAttribute("width",t.toString()),this.foCanvas.setAttribute("height",i.toString()));var r=this.gl;r.canvas.width=t,r.canvas.height=i},i.prototype.endRender=function(){if(this.primitives.forEach((function(t){return t.endRender()})),e.prototype.endRender.call(this),this.isIE){var t=document.createElementNS(i.svgns,"image");t.setAttribute("width",this.gl.canvas.width),t.setAttribute("height",this.gl.canvas.height),t.setAttribute("href",this.canvas.toDataURL()),this.element.appendChild(t),this.canvas.parentNode==this.element&&this.element.removeChild(this.canvas)}},i.prototype.drawEllipse=function(i,r,n,o,s,a){return this.useSvg?e.prototype.drawEllipse.call(this,i,r,n,o,s,a):(this.edraw.drawEllipse(new t.Rect(i-n,r-o,2*n,2*o),this.fill),null)},i.prototype.drawRect=function(i,r,n,o,s,a,h){return"wj-plot-area"==this._groupCls||this.useSvg?e.prototype.drawRect.call(this,i,r,n,o,s,a,h):(this.rdraw.drawRect(new t.Rect(i,r,n,o),this.fill),null)},i.prototype.drawLines=function(t,e,i,r,n,o){return this.ldraw.drawLines(t,e,o,this.stroke,n?this.clipRects[n]:null),null},i.prototype.drawPolygon=function(t,i,r,n,o){return this.useSvg?e.prototype.drawPolygon.call(this,t,i,r,n,o):(this.adraw.drawPolygon(t,i,this.fill,o?this.clipRects[o]:null),null)},i.prototype.addClipRect=function(t,i){e.prototype.addClipRect.call(this,t,i),t&&i&&(this.clipRects[i]=t)},i.prototype.init=function(){if(this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("webgl",{preserveDrawingBuffer:!0}),this.gl){this.canvas.setAttribute("style","margin:0px;padding:0px;border:none");var t=document.createElementNS("http://www.w3.org/1999/xhtml","div");t.setAttribute("style","margin:0px;padding:0px;border:none"),this.foCanvas=document.createElementNS(i.svgns,"foreignObject"),t.appendChild(this.canvas),this.foCanvas.appendChild(t)}else this.gl=this.canvas.getContext("experimental-webgl"),this.isIE=!0,this.canvas.setAttribute("style","visibility:hidden;position:absolute;top:-1000px;margin:0px;padding:0px;border:none");this.rdraw=new n(this.gl),this.edraw=new o(this.gl),this.ldraw=new s(this.gl),this.adraw=new a(this.gl),this.primitives.push(this.rdraw,this.edraw,this.ldraw,this.adraw)},i.svgns="http://www.w3.org/2000/svg",i}(t.chart._SvgRenderEngine);e.WebGLRenderEngine=i;var r=function(){function t(t){this._vsSource="\n    attribute vec2 a_position;\n    \n    uniform vec2 u_resolution;\n    \n    void main() {\n      vec2 zeroToOne = a_position / u_resolution;\n      vec2 zeroToTwo = zeroToOne * 2.0;\n      vec2 clipSpace = zeroToTwo - 1.0;\n      gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n    }\n    ",this._fsSource="\n    precision mediump float;\n    uniform vec4 u_color;\n    void main() {\n      gl_FragColor = u_color;\n    }\n    ",this.gl=t}return t.prototype.init=function(){var t=this.gl;this.shaderProgram=this.initShaderProgram(this.vsSource,this.fsSource),this.positionAttributeLocation=t.getAttribLocation(this.shaderProgram,"a_position"),this.resolutionUniformLocation=t.getUniformLocation(this.shaderProgram,"u_resolution"),this.colorLocation=t.getUniformLocation(this.shaderProgram,"u_color"),t.useProgram(this.shaderProgram),this.positionBuffer=t.createBuffer()},t.prototype.beginRender=function(){var t=this.gl;t.useProgram(this.shaderProgram),t.uniform2f(this.resolutionUniformLocation,t.canvas.width,t.canvas.height)},t.prototype.endRender=function(){this.flush()},t.prototype.flush=function(){},t.prototype.initShaderProgram=function(t,e){var i=this.gl,r=this.loadShader(i.VERTEX_SHADER,t),n=this.loadShader(i.FRAGMENT_SHADER,e),o=i.createProgram();return i.attachShader(o,r),i.attachShader(o,n),i.linkProgram(o),i.getProgramParameter(o,i.LINK_STATUS)?o:(alert("Unable to initialize the shader program: "+i.getProgramInfoLog(o)),null)},t.prototype.loadShader=function(t,e){var i=this.gl,r=i.createShader(t);return i.shaderSource(r,e),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS)?r:(alert("An error occurred compiling the shaders: "+i.getShaderInfoLog(r)),i.deleteShader(r),null)},Object.defineProperty(t.prototype,"vsSource",{get:function(){return this._vsSource},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fsSource",{get:function(){return this._fsSource},enumerable:!0,configurable:!0}),t}(),n=function(e){function i(t){var i=e.call(this,t)||this;return i.BUFFER_SIZE=1e4,i.bufRects=[],i.bufLen=0,i.init(),i}return __extends(i,e),i.prototype.initBuffers=function(){if(!this.buffer){var t=this.gl;this.buffer=new Float32Array(12*this.BUFFER_SIZE),this.bufRects=new Array(this.BUFFER_SIZE),t.enableVertexAttribArray(this.positionAttributeLocation),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.vertexAttribPointer(this.positionAttributeLocation,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,4*this.buffer.length,t.DYNAMIC_DRAW)}},i.prototype.drawRect=function(t,e){this.initBuffers(),e!==this.previousFill&&(this.flush(),this.previousFill=e),this.bufRects[this.bufLen++]=t,this.bufLen>=this.BUFFER_SIZE&&this.flush()},i.prototype.flush=function(){if(0!=this.bufLen){var e=this.gl;e.useProgram(this.shaderProgram);var i=new t.Color(this.previousFill);e.uniform4f(this.colorLocation,i.r/255,i.g/255,i.b/255,i.a),e.enableVertexAttribArray(this.positionAttributeLocation),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.vertexAttribPointer(this.positionAttributeLocation,2,e.FLOAT,!1,0,0),this.setData(),e.enableVertexAttribArray(this.positionAttributeLocation),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.vertexAttribPointer(this.positionAttributeLocation,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6*this.bufLen),this.bufLen=0}},i.prototype.setData=function(){for(var t=this.gl,e=this.bufLen,i=this.buffer,r=0;r<e;r++){var n=this.bufRects[r],o=n.left,s=n.right,a=n.top,h=n.bottom,u=12*r;i[u]=o,i[u+1]=a,i[u+2]=s,i[u+3]=a,i[u+4]=o,i[u+5]=h,i[u+6]=o,i[u+7]=h,i[u+8]=s,i[u+9]=a,i[u+10]=s,i[u+11]=h}t.bufferSubData(t.ARRAY_BUFFER,0,i.subarray(0,12*e))},i}(r),o=function(e){function i(t){var i=e.call(this,t)||this;i.NTRIANGLES=12,i.BUFFER_SIZE=1e4,i.bufRects=new Array(i.BUFFER_SIZE),i.bufLen=0,i.sin1=new Float32Array(i.NTRIANGLES),i.sin2=new Float32Array(i.NTRIANGLES),i.cos1=new Float32Array(i.NTRIANGLES),i.cos2=new Float32Array(i.NTRIANGLES),i.data=new Float32Array(i.BUFFER_SIZE*i.NTRIANGLES*6);for(var r=2*Math.PI/i.NTRIANGLES,n=0;n<i.NTRIANGLES;n++){var o=r*n;i.sin1[n]=Math.sin(o),i.cos1[n]=Math.cos(o),i.sin2[n]=Math.sin(o+r),i.cos2[n]=Math.cos(o+r)}return i.init(),t.enableVertexAttribArray(i.positionAttributeLocation),t.bindBuffer(t.ARRAY_BUFFER,i.positionBuffer),t.vertexAttribPointer(i.positionAttributeLocation,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,4*i.data.length,t.DYNAMIC_DRAW),i}return __extends(i,e),i.prototype.drawEllipse=function(t,e){e!==this.previousFill&&(this.flush(),this.previousFill=e),this.bufRects[this.bufLen++]=t,this.bufLen>=this.BUFFER_SIZE&&this.flush()},i.prototype.flush=function(){if(0!=this.bufLen){var e=this.gl;e.useProgram(this.shaderProgram);var i=new t.Color(this.previousFill);e.uniform4f(this.colorLocation,i.r/255,i.g/255,i.b/255,i.a),e.enableVertexAttribArray(this.positionAttributeLocation),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.vertexAttribPointer(this.positionAttributeLocation,2,e.FLOAT,!1,0,0),this.setData(),e.enableVertexAttribArray(this.positionAttributeLocation),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.vertexAttribPointer(this.positionAttributeLocation,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,this.bufLen*this.NTRIANGLES*3),this.bufLen=0}},i.prototype.setData=function(){for(var t=this.gl,e=this.bufLen,i=this.data,r=0,n=0;n<e;n++)for(var o=this.bufRects[n],s=.5*o.width,a=.5*o.height,h=o.left+s,u=o.top+a,f=0;f<this.NTRIANGLES;f++)i[r=6*(n*this.NTRIANGLES+f)]=h,i[r+1]=u,i[r+2]=h+s*this.sin1[f],i[r+3]=u+a*this.cos1[f],i[r+4]=h+s*this.sin2[f],i[r+5]=u+a*this.cos2[f];t.bufferSubData(t.ARRAY_BUFFER,0,i.subarray(0,r+6))},i}(r),s=(function(e){function i(t){var i=e.call(this,t)||this;return i.BUFFER_SIZE=1e5,i.bufferLen=0,i._vsSource1="\n    attribute vec2 a_position;\n    uniform vec2 u_resolution;\n    void main() {\n      vec2 zeroToOne = a_position / u_resolution;\n      vec2 zeroToTwo = zeroToOne * 2.0;\n      vec2 clipSpace = zeroToTwo - 1.0;\n      gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);\n      gl_PointSize = 5.0;\n    }\n    ",i.init(),i}__extends(i,e),i.prototype.initBuffers=function(){if(!this.buffer){var t=this.gl;this.buffer=new Float32Array(this.BUFFER_SIZE),t.enableVertexAttribArray(this.positionAttributeLocation),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.vertexAttribPointer(this.positionAttributeLocation,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,4*this.buffer.length,t.DYNAMIC_DRAW)}},i.prototype.drawPoint=function(t,e){this.initBuffers(),e!==this.previousFill&&(this.flush(),this.previousFill=e),this.buffer[this.bufferLen++]=t.x,this.buffer[this.bufferLen++]=t.y,this.bufferLen>=this.BUFFER_SIZE&&this.flush()},i.prototype.flush=function(){if(0!=this.bufferLen){var e=this.gl;e.useProgram(this.shaderProgram);var i=new t.Color(this.previousFill);e.uniform4f(this.colorLocation,i.r/255,i.g/255,i.b/255,i.a>0?1:0),e.enableVertexAttribArray(this.positionAttributeLocation),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.vertexAttribPointer(this.positionAttributeLocation,2,e.FLOAT,!1,0,0),e.bufferSubData(e.ARRAY_BUFFER,0,this.buffer.subarray(0,this.bufferLen)),e.drawArrays(e.POINTS,0,this.bufferLen/2),this.bufferLen=0}},Object.defineProperty(i.prototype,"vsSource",{get:function(){return this._vsSource1},enumerable:!0,configurable:!0})}(r),function(e){function i(t){var i=e.call(this,t)||this;return i.BUFFER_SIZE=1e6,i.init(),i}return __extends(i,e),i.prototype.initBuffers=function(){if(!this.buffer){var t=this.gl;this.buffer=new Float32Array(4*this.BUFFER_SIZE),t.enableVertexAttribArray(this.positionAttributeLocation),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.vertexAttribPointer(this.positionAttributeLocation,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,4*this.buffer.length,t.DYNAMIC_DRAW)}},i.prototype.drawLines=function(e,i,r,n,o){void 0===o&&(o=null),this.initBuffers();var s=r||e.length,a=this.gl;a.useProgram(this.shaderProgram),o&&(a.enable(a.SCISSOR_TEST),a.scissor(o.left,a.canvas.height-o.bottom,o.width+1,o.height+1));var h=new t.Color(n);a.uniform4f(this.colorLocation,h.r/255,h.g/255,h.b/255,h.a>0?1:0),a.enableVertexAttribArray(this.positionAttributeLocation),a.bindBuffer(a.ARRAY_BUFFER,this.positionBuffer),a.vertexAttribPointer(this.positionAttributeLocation,2,a.FLOAT,!1,0,0);for(var u=0;u<s;u++)this.buffer[2*u]=e[u],this.buffer[2*u+1]=i[u];a.bufferSubData(a.ARRAY_BUFFER,0,this.buffer.subarray(0,2*s)),a.enableVertexAttribArray(this.positionAttributeLocation),a.bindBuffer(a.ARRAY_BUFFER,this.positionBuffer),a.vertexAttribPointer(this.positionAttributeLocation,2,a.FLOAT,!1,0,0),a.drawArrays(a.LINE_STRIP,0,s),o&&a.disable(a.SCISSOR_TEST)},i}(r)),a=function(i){function r(t){var r=i.call(this,t)||this;return r.earcut=new e._EarCut,r.BUFFER_SIZE=1e6,r.init(),r}return __extends(r,i),r.prototype.initBuffers=function(){if(!this.buffer){var t=this.gl;this.buffer=new Float32Array(4*this.BUFFER_SIZE),t.enableVertexAttribArray(this.positionAttributeLocation),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.vertexAttribPointer(this.positionAttributeLocation,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,4*this.buffer.length,t.DYNAMIC_DRAW)}},r.prototype.drawPolygon=function(e,i,r,n){void 0===n&&(n=null),this.initBuffers();for(var o=e.length,s=[],a=0;a<o;a++)s.push(e[a]),s.push(i[a]);var h=this.earcut.earcut(s),u=this.gl;u.useProgram(this.shaderProgram),n&&(u.enable(u.SCISSOR_TEST),u.scissor(n.left,u.canvas.height-n.bottom,n.width,n.height));var f=new t.Color(r);u.uniform4f(this.colorLocation,f.r/255,f.g/255,f.b/255,f.a>0?1:0),u.enableVertexAttribArray(this.positionAttributeLocation),u.bindBuffer(u.ARRAY_BUFFER,this.positionBuffer),u.vertexAttribPointer(this.positionAttributeLocation,2,u.FLOAT,!1,0,0);var l=0;for(a=0;a<h.length;a++)this.buffer[l++]=s[2*h[a]],this.buffer[l++]=s[2*h[a]+1];u.bufferSubData(u.ARRAY_BUFFER,0,this.buffer.subarray(0,l)),u.enableVertexAttribArray(this.positionAttributeLocation),u.bindBuffer(u.ARRAY_BUFFER,this.positionBuffer),u.vertexAttribPointer(this.positionAttributeLocation,2,u.FLOAT,!1,0,0),u.drawArrays(u.TRIANGLES,0,h.length),n&&u.disable(u.SCISSOR_TEST)},r}(r)})((e=t.chart||(t.chart={})).webgl||(e.webgl={}))}(wijmo||(wijmo={})),function(t){var e;(e=t.chart||(t.chart={})).webgl||(e.webgl={}),t._registerModule("wijmo.chart.webgl",t.chart.webgl)}(wijmo||(wijmo={}));