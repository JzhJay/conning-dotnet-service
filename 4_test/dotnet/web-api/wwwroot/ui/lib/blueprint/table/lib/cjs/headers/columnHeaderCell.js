"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnHeaderCell=exports.HorizontalCellDivider=void 0;var tslib_1=require("tslib"),classnames_1=tslib_1.__importDefault(require("classnames")),React=tslib_1.__importStar(require("react")),react_lifecycles_compat_1=require("react-lifecycles-compat"),core_1=require("@blueprintjs/core"),Classes=tslib_1.__importStar(require("../common/classes")),context_1=require("../common/context"),loadableContent_1=require("../common/loadableContent"),utils_1=require("../common/utils"),headerCell_1=require("./headerCell");function HorizontalCellDivider(){return React.createElement("div",{className:Classes.TABLE_HORIZONTAL_CELL_DIVIDER})}exports.HorizontalCellDivider=HorizontalCellDivider;var ColumnHeaderCell=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isActive:!1},t.handlePopoverOpened=function(){return t.setState({isActive:!0})},t.handlePopoverClosing=function(){return t.setState({isActive:!1})},t}return tslib_1.__extends(t,e),t.isHeaderMouseTarget=function(e){return e.classList.contains(Classes.TABLE_HEADER)||e.classList.contains(Classes.TABLE_COLUMN_NAME)||e.classList.contains(Classes.TABLE_INTERACTION_BAR)||e.classList.contains(Classes.TABLE_HEADER_CONTENT)},t.prototype.render=function(){var e,t=this.props,s=(t.enableColumnReordering,t.isColumnSelected,t.menuIcon,t.name,t.nameRenderer,tslib_1.__rest(t,["enableColumnReordering","isColumnSelected","menuIcon","name","nameRenderer"])),n=classnames_1.default(s.className,Classes.TABLE_COLUMN_HEADER_CELL,((e={})[Classes.TABLE_HAS_INTERACTION_BAR]=this.context.enableColumnInteractionBar,e[Classes.TABLE_HAS_REORDER_HANDLE]=null!=this.props.reorderHandle,e));return React.createElement(headerCell_1.HeaderCell,tslib_1.__assign({isReorderable:this.props.enableColumnReordering,isSelected:this.props.isColumnSelected},s,{className:n}),this.renderName(),this.maybeRenderContent(),this.props.loading?void 0:this.props.resizeHandle)},t.prototype.renderName=function(){var e=this.props,t=e.index,s=e.loading,n=e.name,a=e.nameRenderer,r=e.reorderHandle,l=this.maybeRenderDropdownMenu(),o=React.createElement("div",{className:Classes.TABLE_TRUNCATED_TEXT},n),i=React.createElement(loadableContent_1.LoadableContent,{loading:s,variableLength:!0},null==a?o:a(n,t));return this.context.enableColumnInteractionBar?React.createElement("div",{className:Classes.TABLE_COLUMN_NAME,title:n},React.createElement("div",{className:Classes.TABLE_INTERACTION_BAR},r,l),React.createElement(HorizontalCellDivider,null),React.createElement("div",{className:Classes.TABLE_COLUMN_NAME_TEXT},i)):React.createElement("div",{className:Classes.TABLE_COLUMN_NAME,title:n},r,l,React.createElement("div",{className:Classes.TABLE_COLUMN_NAME_TEXT},i))},t.prototype.maybeRenderContent=function(){if(null!==this.props.children)return React.createElement("div",{className:Classes.TABLE_HEADER_CONTENT},this.props.children)},t.prototype.maybeRenderDropdownMenu=function(){var e,t=this.props,s=t.index,n=t.menuIcon,a=t.menuRenderer;if(core_1.Utils.isFunction(a)){var r=classnames_1.default(Classes.TABLE_TH_MENU_CONTAINER,utils_1.CLASSNAME_EXCLUDED_FROM_TEXT_MEASUREMENT,((e={})[Classes.TABLE_TH_MENU_OPEN]=this.state.isActive,e));return React.createElement("div",{className:r},React.createElement("div",{className:Classes.TABLE_TH_MENU_CONTAINER_BACKGROUND}),React.createElement(core_1.Popover,{content:a(s),position:core_1.Position.BOTTOM,className:Classes.TABLE_TH_MENU,modifiers:{preventOverflow:{boundariesElement:"window"}},onOpened:this.handlePopoverOpened,onClosing:this.handlePopoverClosing},React.createElement(core_1.Icon,{icon:n})))}},t.defaultProps={isActive:!1,menuIcon:"chevron-down"},t.contextTypes=context_1.columnInteractionBarContextTypes,tslib_1.__decorate([react_lifecycles_compat_1.polyfill],t)}(core_1.AbstractPureComponent2);exports.ColumnHeaderCell=ColumnHeaderCell;