import{__assign,__decorate,__extends}from"tslib";import*as React from"react";import{polyfill}from"react-lifecycles-compat";import{AbstractPureComponent2}from"@blueprintjs/core";import{Utils}from"../common/index";import{Orientation,ResizeHandle}from"./resizeHandle";var Resizable=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=i.getDerivedStateFromProps(t.props,null),t.onResizeMove=function(e,i){t.offsetSize(i),null!=t.props.onSizeChanged&&t.props.onSizeChanged(t.state.size)},t.onResizeEnd=function(e){t.setState({unclampedSize:t.state.size}),null!=t.props.onResizeEnd&&t.props.onResizeEnd(t.state.size)},t}var i;return __extends(t,e),i=t,t.getDerivedStateFromProps=function(e,t){var i=e.size;return null==t?{size:i,unclampedSize:i}:null},t.prototype.componentDidUpdate=function(e){e.size!==this.props.size&&this.setState(i.getDerivedStateFromProps(this.props,null))},t.prototype.render=function(){var e=React.Children.only(this.props.children),t=__assign(__assign({},e.props.style),this.getStyle());if(!1===this.props.isResizable)return React.cloneElement(e,{style:t});var i=this.renderResizeHandle();return React.cloneElement(e,{style:t,resizeHandle:i})},t.prototype.renderResizeHandle=function(){var e=this.props,t=e.onLayoutLock,i=e.onDoubleClick,s=e.orientation;return React.createElement(ResizeHandle,{key:"resize-handle",onDoubleClick:i,onLayoutLock:t,onResizeEnd:this.onResizeEnd,onResizeMove:this.onResizeMove,orientation:s})},t.prototype.getStyle=function(){return this.props.orientation===Orientation.VERTICAL?{flexBasis:this.state.size+"px",minWidth:"0px",width:this.state.size+"px"}:{flexBasis:this.state.size+"px",height:this.state.size+"px",minHeight:"0px"}},t.prototype.offsetSize=function(e){var t=this.state.unclampedSize+e;this.setState({size:Utils.clamp(t,this.props.minSize,this.props.maxSize),unclampedSize:t})},t.defaultProps={isResizable:!0,minSize:0},i=__decorate([polyfill],t)}(AbstractPureComponent2);export{Resizable};