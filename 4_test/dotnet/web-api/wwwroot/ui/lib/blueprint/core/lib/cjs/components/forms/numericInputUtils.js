"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sanitizeNumericInput=exports.toMaxPrecision=exports.isValidNumericKeyboardEvent=exports.isValueNumeric=exports.parseStringToStringNumber=exports.getValueOrEmptyValue=exports.clampValue=exports.toLocaleString=void 0;var utils_1=require("../../common/utils");function getDecimalSeparator(e){var r=1.9.toLocaleString(e),t=1..toLocaleString(e),i=9..toLocaleString(e),n=new RegExp(t+"(.+)"+i).exec(r);return n&&n[1]||"."}function toLocaleString(e,r){return void 0===r&&(r="en-US"),sanitizeNumericInput(e.toLocaleString(r),r)}function clampValue(e,r,t){var i=null!=r?r:-1/0,n=null!=t?t:1/0;return utils_1.clamp(e,i,n)}function getValueOrEmptyValue(e){return void 0===e&&(e=""),e.toString()}function transformLocalizedNumberToStringNumber(e,r){var t=[0,1,2,3,4,5,6,7,8,9].map((function(e){return e.toLocaleString(r)})).indexOf(e);return-1!==t?t:e}function parseStringToStringNumber(e,r){var t=""+e;if(parseFloat(t).toString()===e.toString())return e.toString();if(void 0!==r){var i=getDecimalSeparator(r);return sanitizeNumericInput(t,r).split("").map((function(e){return transformLocalizedNumberToStringNumber(e,r)})).join("").replace(i,".")}return e.toString()}function isValueNumeric(e,r){var t=parseStringToStringNumber(e,r);return null!=e&&t-parseFloat(t)+1>=0}function isValidNumericKeyboardEvent(e,r){return null==e.key||!!(e.ctrlKey||e.altKey||e.metaKey)||!(1===e.key.length)||isFloatingPointNumericCharacter(e.key,r)}function isFloatingPointNumericCharacter(e,r){if(void 0!==r){var t=getDecimalSeparator(r).replace(".","\\."),i=[0,1,2,3,4,5,6,7,8,9].map((function(e){return e.toLocaleString(r)})).join("");return new RegExp("^[Ee"+i+"\\+\\-"+t+"]$").test(e)}return/^[Ee0-9\+\-\.]$/.test(e)}function toMaxPrecision(e,r){var t=Math.pow(10,r);return Math.round(e*t)/t}function convertFullWidthNumbersToAscii(e){return e.replace(/[\uFF10-\uFF19]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))}function sanitizeNumericInput(e,r){return convertFullWidthNumbersToAscii(e).split("").filter((function(e){return isFloatingPointNumericCharacter(e,r)})).join("")}exports.toLocaleString=toLocaleString,exports.clampValue=clampValue,exports.getValueOrEmptyValue=getValueOrEmptyValue,exports.parseStringToStringNumber=parseStringToStringNumber,exports.isValueNumeric=isValueNumeric,exports.isValidNumericKeyboardEvent=isValidNumericKeyboardEvent,exports.toMaxPrecision=toMaxPrecision,exports.sanitizeNumericInput=sanitizeNumericInput;