"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Spinner=exports.SpinnerSize=void 0;var SpinnerSize,tslib_1=require("tslib"),classnames_1=tslib_1.__importDefault(require("classnames")),React=tslib_1.__importStar(require("react")),react_lifecycles_compat_1=require("react-lifecycles-compat"),common_1=require("../../common"),errors_1=require("../../common/errors"),props_1=require("../../common/props"),utils_1=require("../../common/utils");!function(e){e[e.SMALL=20]="SMALL",e[e.STANDARD=50]="STANDARD",e[e.LARGE=100]="LARGE"}(SpinnerSize=exports.SpinnerSize||(exports.SpinnerSize={}));var R=45,SPINNER_TRACK="M 50,50 m 0,-"+R+" a "+R+","+R+" 0 1 1 0,"+2*R+" a "+R+","+R+" 0 1 1 0,-"+2*R,PATH_LENGTH=280,MIN_SIZE=10,STROKE_WIDTH=4,MIN_STROKE_WIDTH=16,Spinner=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return tslib_1.__extends(t,e),t.prototype.componentDidUpdate=function(e){e.value!==this.props.value&&this.forceUpdate()},t.prototype.render=function(){var e,t=this.props,s=t.className,r=t.intent,n=t.value,i=t.tagName,o=void 0===i?"div":i,a=this.getSize(),_=classnames_1.default(common_1.Classes.SPINNER,common_1.Classes.intentClass(r),((e={})[common_1.Classes.SPINNER_NO_SPIN]=null!=n,e),s),S=Math.min(MIN_STROKE_WIDTH,STROKE_WIDTH*SpinnerSize.LARGE/a),l=PATH_LENGTH-PATH_LENGTH*(null==n?.25:utils_1.clamp(n,0,1));return React.createElement(o,{className:_,role:"progressbar"},React.createElement(o,{className:common_1.Classes.SPINNER_ANIMATION},React.createElement("svg",{width:a,height:a,strokeWidth:S.toFixed(2),viewBox:this.getViewBox(S)},React.createElement("path",{className:common_1.Classes.SPINNER_TRACK,d:SPINNER_TRACK}),React.createElement("path",{className:common_1.Classes.SPINNER_HEAD,d:SPINNER_TRACK,pathLength:PATH_LENGTH,strokeDasharray:PATH_LENGTH+" "+PATH_LENGTH,strokeDashoffset:l}))))},t.prototype.validateProps=function(e){var t=e.className,s=void 0===t?"":t;null!=e.size&&(s.indexOf(common_1.Classes.SMALL)>=0||s.indexOf(common_1.Classes.LARGE)>=0)&&console.warn(errors_1.SPINNER_WARN_CLASSES_SIZE)},t.prototype.getSize=function(){var e=this.props,t=e.className,s=void 0===t?"":t,r=e.size;return null==r?s.indexOf(common_1.Classes.SMALL)>=0?SpinnerSize.SMALL:s.indexOf(common_1.Classes.LARGE)>=0?SpinnerSize.LARGE:SpinnerSize.STANDARD:Math.max(MIN_SIZE,r)},t.prototype.getViewBox=function(e){var t=R+e/2,s=(50-t).toFixed(2),r=(2*t).toFixed(2);return s+" "+s+" "+r+" "+r},t.displayName=props_1.DISPLAYNAME_PREFIX+".Spinner",t.SIZE_SMALL=SpinnerSize.SMALL,t.SIZE_STANDARD=SpinnerSize.STANDARD,t.SIZE_LARGE=SpinnerSize.LARGE,tslib_1.__decorate([react_lifecycles_compat_1.polyfill],t)}(common_1.AbstractPureComponent2);exports.Spinner=Spinner;