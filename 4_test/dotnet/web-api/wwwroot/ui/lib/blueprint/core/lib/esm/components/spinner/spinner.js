import{__decorate,__extends}from"tslib";import classNames from"classnames";import*as React from"react";import{polyfill}from"react-lifecycles-compat";import{AbstractPureComponent2,Classes}from"../../common";import{SPINNER_WARN_CLASSES_SIZE}from"../../common/errors";import{DISPLAYNAME_PREFIX}from"../../common/props";import{clamp}from"../../common/utils";export var SpinnerSize;!function(e){e[e.SMALL=20]="SMALL",e[e.STANDARD=50]="STANDARD",e[e.LARGE=100]="LARGE"}(SpinnerSize||(SpinnerSize={}));var R=45,SPINNER_TRACK="M 50,50 m 0,-"+R+" a "+R+","+R+" 0 1 1 0,"+2*R+" a "+R+","+R+" 0 1 1 0,-"+2*R,PATH_LENGTH=280,MIN_SIZE=10,STROKE_WIDTH=4,MIN_STROKE_WIDTH=16,Spinner=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.componentDidUpdate=function(e){e.value!==this.props.value&&this.forceUpdate()},t.prototype.render=function(){var e,t=this.props,s=t.className,r=t.intent,a=t.value,n=t.tagName,i=void 0===n?"div":n,o=this.getSize(),S=classNames(Classes.SPINNER,Classes.intentClass(r),((e={})[Classes.SPINNER_NO_SPIN]=null!=a,e),s),p=Math.min(MIN_STROKE_WIDTH,STROKE_WIDTH*SpinnerSize.LARGE/o),l=PATH_LENGTH-PATH_LENGTH*(null==a?.25:clamp(a,0,1));return React.createElement(i,{className:S,role:"progressbar"},React.createElement(i,{className:Classes.SPINNER_ANIMATION},React.createElement("svg",{width:o,height:o,strokeWidth:p.toFixed(2),viewBox:this.getViewBox(p)},React.createElement("path",{className:Classes.SPINNER_TRACK,d:SPINNER_TRACK}),React.createElement("path",{className:Classes.SPINNER_HEAD,d:SPINNER_TRACK,pathLength:PATH_LENGTH,strokeDasharray:PATH_LENGTH+" "+PATH_LENGTH,strokeDashoffset:l}))))},t.prototype.validateProps=function(e){var t=e.className,s=void 0===t?"":t;null!=e.size&&(s.indexOf(Classes.SMALL)>=0||s.indexOf(Classes.LARGE)>=0)&&console.warn(SPINNER_WARN_CLASSES_SIZE)},t.prototype.getSize=function(){var e=this.props,t=e.className,s=void 0===t?"":t,r=e.size;return null==r?s.indexOf(Classes.SMALL)>=0?SpinnerSize.SMALL:s.indexOf(Classes.LARGE)>=0?SpinnerSize.LARGE:SpinnerSize.STANDARD:Math.max(MIN_SIZE,r)},t.prototype.getViewBox=function(e){var t=R+e/2,s=(50-t).toFixed(2),r=(2*t).toFixed(2);return s+" "+s+" "+r+" "+r},t.displayName=DISPLAYNAME_PREFIX+".Spinner",t.SIZE_SMALL=SpinnerSize.SMALL,t.SIZE_STANDARD=SpinnerSize.STANDARD,t.SIZE_LARGE=SpinnerSize.LARGE,__decorate([polyfill],t)}(AbstractPureComponent2);export{Spinner};