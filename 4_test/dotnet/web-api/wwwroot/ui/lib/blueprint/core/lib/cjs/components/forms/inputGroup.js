"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputGroup=void 0;var tslib_1=require("tslib"),classnames_1=tslib_1.__importDefault(require("classnames")),React=tslib_1.__importStar(require("react")),react_lifecycles_compat_1=require("react-lifecycles-compat"),common_1=require("../../common"),Errors=tslib_1.__importStar(require("../../common/errors")),props_1=require("../../common/props"),icon_1=require("../icon/icon"),asyncControllableInput_1=require("./asyncControllableInput"),InputGroup=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.leftElement=null,t.rightElement=null,t.refHandlers={leftElement:function(e){return t.leftElement=e},rightElement:function(e){return t.rightElement=e}},t}return tslib_1.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.asyncControl,s=void 0!==n&&n,l=t.className,r=t.disabled,i=t.fill,o=t.inputRef,a=t.intent,m=t.large,c=t.small,p=t.round,_=classnames_1.default(common_1.Classes.INPUT_GROUP,common_1.Classes.intentClass(a),((e={})[common_1.Classes.DISABLED]=r,e[common_1.Classes.FILL]=i,e[common_1.Classes.LARGE]=m,e[common_1.Classes.SMALL]=c,e[common_1.Classes.ROUND]=p,e),l),u=tslib_1.__assign(tslib_1.__assign({},this.props.style),{paddingLeft:this.state.leftElementWidth,paddingRight:this.state.rightElementWidth}),h=tslib_1.__assign(tslib_1.__assign({type:"text"},props_1.removeNonHTMLProps(this.props)),{className:common_1.Classes.INPUT,style:u});return React.createElement("div",{className:_},this.maybeRenderLeftElement(),s?React.createElement(asyncControllableInput_1.AsyncControllableInput,tslib_1.__assign({},h,{inputRef:o})):React.createElement("input",tslib_1.__assign({},h,{ref:o})),this.maybeRenderRightElement())},t.prototype.componentDidMount=function(){this.updateInputWidth()},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.leftElement,s=t.rightElement;e.leftElement===n&&e.rightElement===s||this.updateInputWidth()},t.prototype.validateProps=function(e){null!=e.leftElement&&null!=e.leftIcon&&console.warn(Errors.INPUT_WARN_LEFT_ELEMENT_LEFT_ICON_MUTEX)},t.prototype.maybeRenderLeftElement=function(){var e=this.props,t=e.leftElement,n=e.leftIcon;return null!=t?React.createElement("span",{className:common_1.Classes.INPUT_LEFT_CONTAINER,ref:this.refHandlers.leftElement},t):null!=n?React.createElement(icon_1.Icon,{icon:n}):void 0},t.prototype.maybeRenderRightElement=function(){var e=this.props.rightElement;if(null!=e)return React.createElement("span",{className:common_1.Classes.INPUT_ACTION,ref:this.refHandlers.rightElement},e)},t.prototype.updateInputWidth=function(){var e=this.state,t=e.leftElementWidth,n=e.rightElementWidth;if(null!=this.leftElement){var s=this.leftElement.clientWidth;(void 0===t||Math.abs(s-t)>2)&&this.setState({leftElementWidth:s})}else this.setState({leftElementWidth:void 0});null!=this.rightElement?(s=this.rightElement.clientWidth,(void 0===n||Math.abs(s-n)>2)&&this.setState({rightElementWidth:s})):this.setState({rightElementWidth:void 0})},t.displayName=props_1.DISPLAYNAME_PREFIX+".InputGroup",tslib_1.__decorate([react_lifecycles_compat_1.polyfill],t)}(common_1.AbstractPureComponent2);exports.InputGroup=InputGroup;