import{__assign,__extends}from"tslib";import classNames from"classnames";import*as React from"react";import*as Classes from"../../common/classes";import{DISPLAYNAME_PREFIX}from"../../common/props";import{isFunction}from"../../common/utils";import{TreeNode}from"./treeNode";var Tree=function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.nodeRefs={},o.handleNodeCollapse=function(e,n){o.handlerHelper(o.props.onNodeCollapse,e,n)},o.handleNodeClick=function(e,n){o.handlerHelper(o.props.onNodeClick,e,n)},o.handleContentRef=function(e,n){null!=n?o.nodeRefs[e.props.id]=n:delete o.nodeRefs[e.props.id]},o.handleNodeContextMenu=function(e,n){o.handlerHelper(o.props.onNodeContextMenu,e,n)},o.handleNodeDoubleClick=function(e,n){o.handlerHelper(o.props.onNodeDoubleClick,e,n)},o.handleNodeExpand=function(e,n){o.handlerHelper(o.props.onNodeExpand,e,n)},o.handleNodeMouseEnter=function(e,n){o.handlerHelper(o.props.onNodeMouseEnter,e,n)},o.handleNodeMouseLeave=function(e,n){o.handlerHelper(o.props.onNodeMouseLeave,e,n)},o}return __extends(o,e),o.ofType=function(){return o},o.nodeFromPath=function(e,n){return 1===e.length?n[e[0]]:o.nodeFromPath(e.slice(1),n[e[0]].childNodes)},o.prototype.render=function(){return React.createElement("div",{className:classNames(Classes.TREE,this.props.className)},this.renderNodes(this.props.contents,[],Classes.TREE_ROOT))},o.prototype.getNodeContentElement=function(e){return this.nodeRefs[e]},o.prototype.renderNodes=function(e,o,n){var t=this;if(null==e)return null;var r=e.map((function(e,n){var r=o.concat(n),s=TreeNode.ofType();return React.createElement(s,__assign({},e,{key:e.id,contentRef:t.handleContentRef,depth:r.length-1,onClick:t.handleNodeClick,onContextMenu:t.handleNodeContextMenu,onCollapse:t.handleNodeCollapse,onDoubleClick:t.handleNodeDoubleClick,onExpand:t.handleNodeExpand,onMouseEnter:t.handleNodeMouseEnter,onMouseLeave:t.handleNodeMouseLeave,path:r}),t.renderNodes(e.childNodes,r))}));return React.createElement("ul",{className:classNames(Classes.TREE_NODE_LIST,n)},r)},o.prototype.handlerHelper=function(e,n,t){isFunction(e)&&e(o.nodeFromPath(n.props.path,this.props.contents),n.props.path,t)},o.displayName=DISPLAYNAME_PREFIX+".Tree",o}(React.Component);export{Tree};