"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ResizeSensor=void 0;var tslib_1=require("tslib"),React=tslib_1.__importStar(require("react")),react_dom_1=require("react-dom"),react_lifecycles_compat_1=require("react-lifecycles-compat"),resize_observer_polyfill_1=tslib_1.__importDefault(require("resize-observer-polyfill")),common_1=require("../../common"),props_1=require("../../common/props"),ResizeSensor=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.element=null,r.observer=new resize_observer_polyfill_1.default((function(e){var t,o;return null===(o=(t=r.props).onResize)||void 0===o?void 0:o.call(t,e)})),r}return tslib_1.__extends(r,e),r.prototype.render=function(){return React.Children.only(this.props.children)},r.prototype.componentDidMount=function(){this.observeElement()},r.prototype.componentDidUpdate=function(e){this.observeElement(this.props.observeParents!==e.observeParents)},r.prototype.componentWillUnmount=function(){this.observer.disconnect()},r.prototype.observeElement=function(e){void 0===e&&(e=!1);var r=this.getElement();if(r instanceof Element){if((r!==this.element||e)&&(this.observer.disconnect(),this.element=r,this.observer.observe(r),this.props.observeParents))for(var t=r.parentElement;null!=t;)this.observer.observe(t),t=t.parentElement}else this.observer.disconnect()},r.prototype.getElement=function(){try{return react_dom_1.findDOMNode(this)}catch(e){return null}},r.displayName=props_1.DISPLAYNAME_PREFIX+".ResizeSensor",tslib_1.__decorate([react_lifecycles_compat_1.polyfill],r)}(common_1.AbstractPureComponent2);exports.ResizeSensor=ResizeSensor;