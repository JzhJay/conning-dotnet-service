"use strict";var _a;Object.defineProperty(exports,"__esModule",{value:!0}),exports.HotkeysProvider=exports.HotkeysContext=void 0;var tslib_1=require("tslib"),React=tslib_1.__importStar(require("react")),utils_1=require("../../common/utils"),hotkeysDialog2_1=require("../../components/hotkeys/hotkeysDialog2"),initialHotkeysState={hotkeys:[],isDialogOpen:!1},noOpDispatch=function(){return null};exports.HotkeysContext=null===(_a=React.createContext)||void 0===_a?void 0:_a.call(React,[initialHotkeysState,noOpDispatch]);var hotkeysReducer=function(e,t){switch(t.type){case"ADD_HOTKEYS":for(var s=[],o=0,i=t.payload;o<i.length;o++){for(var r=i[o],a=!0,l=0,n=e.hotkeys;l<n.length;l++){var _=n[l];a&&(a=!utils_1.shallowCompareKeys(r,_,{exclude:["onKeyDown","onKeyUp"]}))}a&&s.push(r)}return tslib_1.__assign(tslib_1.__assign({},e),{hotkeys:tslib_1.__spreadArrays(e.hotkeys,s)});case"REMOVE_HOTKEYS":return tslib_1.__assign(tslib_1.__assign({},e),{hotkeys:e.hotkeys.filter((function(e){return-1===t.payload.indexOf(e)}))});case"OPEN_DIALOG":return tslib_1.__assign(tslib_1.__assign({},e),{isDialogOpen:!0});case"CLOSE_DIALOG":return tslib_1.__assign(tslib_1.__assign({},e),{isDialogOpen:!1});default:return e}},HotkeysProvider=function(e){var t,s=e.children,o=e.dialogProps,i=e.renderDialog,r=e.value,a=null!=r,l=null!=r?r:React.useReducer(hotkeysReducer,initialHotkeysState),n=l[0],_=l[1],u=React.useCallback((function(){return _({type:"CLOSE_DIALOG"})}),[]),c=null!==(t=null==i?void 0:i(n,{handleDialogClose:u}))&&void 0!==t?t:React.createElement(hotkeysDialog2_1.HotkeysDialog2,tslib_1.__assign({},o,{isOpen:n.isDialogOpen,hotkeys:n.hotkeys,onClose:u}));return React.createElement(exports.HotkeysContext.Provider,{value:[n,_]},s,a?void 0:c)};exports.HotkeysProvider=HotkeysProvider;