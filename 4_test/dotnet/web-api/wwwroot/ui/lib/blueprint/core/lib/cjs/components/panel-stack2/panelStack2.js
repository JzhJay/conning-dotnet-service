"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PanelStack2=void 0;var tslib_1=require("tslib"),classnames_1=tslib_1.__importDefault(require("classnames")),React=tslib_1.__importStar(require("react")),react_transition_group_1=require("react-transition-group"),common_1=require("../../common"),panelView2_1=require("./panelView2"),PanelStack2=function(e){var n=e.renderActivePanelOnly,t=void 0===n||n,a=e.showPanelHeader,r=void 0===a||a,l=e.stack,s=React.useState("push"),c=s[0],o=s[1],i=React.useState(void 0!==e.initialPanel?[e.initialPanel]:[]),u=i[0],_=i[1],m=React.useMemo((function(){return null!=l?l.slice().reverse():u}),[u,l]),p=React.useRef(m.length);React.useEffect((function(){m.length!==p.current&&o(m.length-p.current<0?"pop":"push"),p.current=m.length}),[m]);var v=React.useCallback((function(n){var t;null===(t=e.onOpen)||void 0===t||t.call(e,n),null==e.stack&&_((function(e){return tslib_1.__spreadArrays([n],e)}))}),[e.onOpen]),P=React.useCallback((function(n){var t;m[0]!==n||m.length<=1||(null===(t=e.onClose)||void 0===t||t.call(e,n),null==e.stack&&_((function(e){return e.slice(1)})))}),[m,e.onClose]);if(0===m.length)return null;var d=(t?[m[0]]:m).map((function(e,n){var a=m.length-n,l=t?m.length:a;return React.createElement(react_transition_group_1.CSSTransition,{classNames:common_1.Classes.PANEL_STACK2,key:l,timeout:400},React.createElement(panelView2_1.PanelView2,{onClose:P,onOpen:v,panel:e,previousPanel:m[n+1],showHeader:r}))})).reverse(),f=classnames_1.default(common_1.Classes.PANEL_STACK2,common_1.Classes.PANEL_STACK2+"-"+c,e.className);return React.createElement(react_transition_group_1.TransitionGroup,{className:f,component:"div"},d)};exports.PanelStack2=PanelStack2,exports.PanelStack2.displayName=common_1.DISPLAYNAME_PREFIX+".PanelStack2";