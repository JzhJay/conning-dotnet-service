"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DateRangeSelectionStrategy=void 0;var core_1=require("@blueprintjs/core"),dateUtils_1=require("./common/dateUtils"),DateRangeSelectionStrategy=function(){function e(){}return e.getNextState=function(e,t,a,r){return null!=r?this.getNextStateForBoundary(e,t,a,r):this.getDefaultNextState(e,t,a)},e.getNextStateForBoundary=function(e,t,a,r){var n,l,u=this.getBoundaryDate(r,e),o=this.getOtherBoundary(r),i=this.getBoundaryDate(o,e);if(null==u&&null==i)n=r,l=this.createRangeForBoundary(r,t,null);else if(null!=u&&null==i){var s=dateUtils_1.areSameDay(u,t)?null:t;n=r,l=this.createRangeForBoundary(r,s,null)}else if(null==u&&null!=i)if(dateUtils_1.areSameDay(t,i)){var d=void 0;a?(n=r,d=i):(n=o,d=null),l=this.createRangeForBoundary(r,d,d)}else this.isOverlappingOtherBoundary(r,t,i)?(n=o,l=this.createRangeForBoundary(r,i,t)):(n=r,l=this.createRangeForBoundary(r,t,i));else if(dateUtils_1.areSameDay(u,t)){var y=dateUtils_1.areSameDay(u,i)?null:i;n=r,l=this.createRangeForBoundary(r,null,y)}else if(dateUtils_1.areSameDay(t,i)){var c=a?[i,i]:[u,null];s=c[0],y=c[1],n=a?r:o,l=this.createRangeForBoundary(r,s,y)}else this.isOverlappingOtherBoundary(r,t,i)?(n=r,l=this.createRangeForBoundary(r,t,null)):(n=r,l=this.createRangeForBoundary(r,t,i));return{dateRange:l,boundary:n}},e.getDefaultNextState=function(e,t,a){var r,n=e[0],l=e[1];if(null==n&&null==l)r=[t,null];else if(null!=n&&null==l)r=this.createRange(t,n,a);else if(null==n&&null!=l)r=this.createRange(t,l,a);else{var u=dateUtils_1.areSameDay(n,t),o=dateUtils_1.areSameDay(l,t);r=u&&o?[null,null]:u?[null,l]:o?[n,null]:[t,null]}return{dateRange:r}},e.getOtherBoundary=function(e){return e===core_1.Boundary.START?core_1.Boundary.END:core_1.Boundary.START},e.getBoundaryDate=function(e,t){return e===core_1.Boundary.START?t[0]:t[1]},e.isOverlappingOtherBoundary=function(e,t,a){return e===core_1.Boundary.START?t>a:t<a},e.createRangeForBoundary=function(e,t,a){return e===core_1.Boundary.START?[t,a]:[a,t]},e.createRange=function(e,t,a){return!a&&dateUtils_1.areSameDay(e,t)?[null,null]:e<t?[e,t]:[t,e]},e}();exports.DateRangeSelectionStrategy=DateRangeSelectionStrategy;